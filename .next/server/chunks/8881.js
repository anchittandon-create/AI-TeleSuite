"use strict";exports.id=8881,exports.ids=[8881],exports.modules={11563:(a,b,c)=>{c.d(b,{SQ:()=>m,_2:()=>n,mB:()=>o,rI:()=>k,ty:()=>l});var d=c(21124),e=c(38301),f=c(12927),g=c(77503),h=c(8015),i=c(46171),j=c(44943);let k=f.bL,l=f.l9;f.YJ,f.ZL,f.Pb,f.z6,e.forwardRef(({className:a,inset:b,children:c,...e},h)=>(0,d.jsxs)(f.ZP,{ref:h,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...e,children:[c,(0,d.jsx)(g.A,{className:"ml-auto"})]})).displayName=f.ZP.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.G5,{ref:c,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...b})).displayName=f.G5.displayName;let m=e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(f.ZL,{children:(0,d.jsx)(f.UC,{ref:e,sideOffset:b,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));m.displayName=f.UC.displayName;let n=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.q7,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...c}));n.displayName=f.q7.displayName,e.forwardRef(({className:a,children:b,checked:c,...e},g)=>(0,d.jsxs)(f.H_,{ref:g,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...e,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(h.A,{className:"h-4 w-4"})})}),b]})).displayName=f.H_.displayName,e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.hN,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=f.hN.displayName,e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.JU,{ref:e,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c})).displayName=f.JU.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b}));o.displayName=f.wv.displayName},22858:(a,b,c)=>{function d(a,b){if(!b||!b.length)return;let c=Object.keys(b[0]),d=new Blob([c.join(",")+"\n"+b.map(a=>c.map(b=>{let c=null===a[b]||void 0===a[b]?"":a[b];return(c=c instanceof Date?c.toLocaleString():c.toString().replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(c=`"${c}"`),c}).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a");if(void 0!==e.download){let b=URL.createObjectURL(d);e.setAttribute("href",b),e.setAttribute("download",a),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(b)}}function e(a,b){let c=new Blob([b],{type:a.endsWith(".doc")?"application/msword":"text/plain;charset=utf-8;"}),d=document.createElement("a");if(void 0!==d.download){let b=URL.createObjectURL(c);d.setAttribute("href",b),d.setAttribute("download",a),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(b)}}async function f(a,b){if(!a)return void console.error("No audio reference provided, cannot download.");let c=null;if(a.startsWith("data:")){if(!(c=function(a){if(!a||!a.includes(","))return null;try{let b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d);for(let a=0;a<b.length;a++)e[a]=b.charCodeAt(a);return new Blob([d],{type:c})}catch(a){return console.error("Error converting data URI to Blob:",a),null}}(a)))return void console.error("Failed to convert Data URI to Blob for download.")}else try{let b=await fetch(a);if(!b.ok)throw Error(`Failed to fetch audio asset (${b.status})`);c=await b.blob()}catch(a){console.error("Unable to download remote audio asset:",a);return}let d=document.createElement("a");if(void 0!==d.download&&c){let a=URL.createObjectURL(c);d.setAttribute("href",a),d.setAttribute("download",b),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(a)}}function g(a,b,c){let d=function(a,b,c){let d="",e=a.map((a,c)=>{let d=a.length;return b.forEach(a=>{let b=String(null===a[c]||void 0===a[c]?"":a[c]);b.length>d&&(d=b.length)}),d}),f=a.map((a,b)=>a.padEnd(e[b])).join(" | ");return d+=f+"\n"+a.map((a,b)=>"-".repeat(e[b])).join("-+-")+"\n",b.forEach(a=>{let b=a.map((a,b)=>String(null==a?"":a).padEnd(e[b])).join(" | ");d+=b+"\n"}),d}(b,c);e(a.endsWith(".doc")?a:`${a}.doc`,d)}async function h(a,b,d){let{jsPDF:e}=await c.e(5039).then(c.bind(c,75039)),{default:f}=await c.e(7439).then(c.bind(c,57439)),g=new e({orientation:"landscape"});f(g,{head:[b],body:d,styles:{fontSize:8},headStyles:{fillColor:[41,128,185]},margin:{top:20},didDrawPage:function(a){g.setFontSize(16),g.text("Exported Table Data",a.settings.margin.left,15)}}),g.save(a.endsWith(".pdf")?a:`${a}.pdf`)}c.d(b,{U3:()=>e,e3:()=>h,mf:()=>g,vG:()=>f,yR:()=>d})},48536:(a,b,c)=>{c.d(b,{Hc:()=>i,oc:()=>h,ws:()=>g});var d=c(75039),e=c(50526),f=c(25054);function g(a,b){let c=new d.jsPDF({orientation:"portrait",unit:"pt",format:"a4"});c.setFont("helvetica","normal"),c.setFontSize(10);let e=c.internal.pageSize.getHeight(),f=c.internal.pageSize.getWidth(),g=f-80,h=40;if(b){c.setFontSize(16),c.setFont("helvetica","bold");let a=c.splitTextToSize(b,g);c.text(a,f/2,h,{align:"center"}),h+=16*a.length+20,c.setFontSize(10),c.setFont("helvetica","normal")}return c.splitTextToSize(a,g).forEach(a=>{h+12>e-40&&(c.addPage(),h=40),c.text(a,40,h),h+=12}),c.output("blob")}function h(a,b,c=!1){try{let d=b.replace(/\.pdf$/,"").replace(/_/g," "),e=g(a,d);if(c)return e;let f=URL.createObjectURL(e),h=document.createElement("a");h.href=f,h.download=b,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(f)}catch(a){console.error("Error generating text-based PDF:",a),alert("Failed to generate PDF. Your browser might not be fully supported or there was an unexpected error.")}}async function i(a){let{scoreOutput:b,fileName:d,agentNameFromForm:g}=a.details,{product:h,timestamp:i}=a;if(!b||"number"!=typeof b.overallScore)throw Error("Cannot generate PDF report: The scoring data is incomplete or missing.");let{jsPDF:j}=await Promise.resolve().then(c.bind(c,75039)),{default:k}=await c.e(7439).then(c.bind(c,57439)),l=new j({orientation:"portrait",unit:"pt",format:"a4"}),m=l.internal.pageSize.getHeight(),n=l.internal.pageSize.getWidth(),o=n-80,p=40,q=(a=20)=>{p+a>m-40&&(l.addPage(),p=40)};l.setFont("helvetica","bold"),l.setFontSize(18),l.text("Call Scoring Report",n/2,p,{align:"center"}),p+=30,l.setFont("helvetica","normal"),l.setFontSize(10);let r=[`File Name: ${d}`,`Agent Name: ${g||"N/A"}`,`Product Focus: ${h||"General"}`],s=[`Date Scored: ${(0,e.GP)((0,f.H)(i),"PP p")}`,`Overall Score: ${b.overallScore.toFixed(1)}/5 (${b.callCategorisation})`,`Conversion Readiness: ${b.conversionReadiness||"N/A"}`,`Suggested Disposition: ${b.suggestedDisposition||"N/A"}`];l.text(r,40,p),l.text(s,n-40,p,{align:"right"}),p+=12*s.length+15,l.setDrawColor(200),l.line(40,p,n-40,p),p+=20;let t=(a,b,c={})=>{q(30),l.setFont("helvetica",c.fontStyle||"bold"),l.setFontSize(12),c.titleColor&&l.setTextColor(c.titleColor[0],c.titleColor[1],c.titleColor[2]),l.text(a,40,p),p+=18,l.setTextColor(0,0,0),l.setFont("helvetica","normal"),l.setFontSize(10);let d=c.isList&&Array.isArray(b)?b.map(a=>`- ${a}`).join("\n"):Array.isArray(b)?b.join("\n"):b;l.splitTextToSize(d,o).forEach(a=>{q(12),l.text(a,40+5*!!c.isList,p),p+=12}),p+=15};return t("Summary",b.summary),b.strengths?.length>0&&t("Key Strengths",b.strengths,{isList:!0}),b.areasForImprovement?.length>0&&t("Areas for Improvement",b.areasForImprovement,{isList:!0}),b.redFlags&&b.redFlags.length>0&&t("Critical Red Flags",b.redFlags,{isList:!0,titleColor:[220,53,69]}),q(40),l.setFont("helvetica","bold"),l.setFontSize(12),l.text("Detailed Metric Scores",40,p),p+=5,b.metricScores&&b.metricScores.length>0&&(k(l,{head:[["Metric","Score","Feedback"]],body:b.metricScores.map(a=>[a.metric,`${a.score?.toFixed(1)||"N/A"}/5`,a.feedback||"N/A"]),startY:p,headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold"},columnStyles:{0:{cellWidth:120},1:{cellWidth:50,halign:"center"},2:{cellWidth:"auto"}},didDrawPage:a=>{p=a.cursor?.y||p}}),p=l.lastAutoTable.finalY+20),b.improvementSituations&&b.improvementSituations.length>0&&(q(30),l.setFont("helvetica","bold"),l.setFontSize(12),l.text("Situations for Improvement",40,p),p+=18,b.improvementSituations.forEach((a,b)=>{q(60),l.setFontSize(10),l.setFont("helvetica","bold"),l.text(`Situation ${b+1}: ${a.context}`,40,p),p+=12,l.setFont("helvetica","italic"),l.setTextColor(150,150,150),a.timeInCall&&(l.text(`Time in call: ${a.timeInCall}`,40,p),p+=12),l.setTextColor(0,0,0);let c=(a,b)=>{l.splitTextToSize(`${a}: ${b}`,o-10).forEach(a=>{q(12),l.text(a,50,p),p+=12})};l.setFont("helvetica","normal"),a.userDialogue&&c("User Said",`"${a.userDialogue}"`),c("Agent's Response",`"${a.agentResponse}"`),c("Suggested Response",`"${a.suggestedResponse}"`),p+=10})),t("Original Call Transcript",b.transcript),l.output("blob")}}};