"use strict";exports.id=8943,exports.ids=[8943],exports.modules={854:(a,b,c)=>{c.d(b,{q:()=>d});function d(a,[b,c]){return Math.min(c,Math.max(b,a))}},2865:(a,b,c)=>{c.r(b),c.d(b,{"40ddbb4bb294900f46ec035623b87b51b68fc7f373":()=>l});var d=c(91488);c(27806);var e=c(38710),f=c(56571),g=c(87603),h=c(40410);let i=e.ai.definePrompt({name:"generateRebuttalPrompt",input:{schema:g._x},output:{schema:g.Ph},prompt:`You are a world-class sales coach and linguist, specializing in crafting perfect rebuttals for telesales agents selling {{{product}}} subscriptions. Your responses must be of the absolute highest quality: crystal-clear, empathetic, strategic, and self-explanatory based on the context.

**Customer's Objection:** "{{{objection}}}"

**CRITICAL: Your entire response MUST be grounded in the information provided in the 'Knowledge Base Context' section below. If a 'USER-SELECTED KB CONTEXT' section is present, it is your PRIMARY and ONLY source of truth. If the provided Knowledge Base is insufficient, you are authorized to supplement your response by browsing the official product website ({{{brandUrl}}}) and its sub-pages to find accurate information. Do NOT invent facts.**

**Knowledge Base Context for '{{{product}}}' (Your ONLY source of truth):**
\`\`\`
{{{knowledgeBaseContext}}}
\`\`\`

**Your Task & Reasoning Process (Chain of Thought - Internal Monologue):**
Before generating the final rebuttal, you MUST perform this internal analysis:
1.  **Analyze & Categorize Objection:** What is the ROOT of the user's objection? Is it about price, value, time, trust, or something else?
2.  **Extract Relevant KB Facts:** Based on the category, scan the Knowledge Base and extract the 1-3 MOST relevant facts or benefits that directly counter the objection. If a 'USER-SELECTED KB CONTEXT' section is present, prioritize facts from there. If KB is insufficient, find relevant information on the official website.
3.  **Formulate Strategy:** How will you use these facts to reframe the objection? Your strategy must be to show understanding and then pivot to the value proposition that makes the objection less relevant.

**Final Rebuttal Generation (Adhere to this Quality Rubric):**

1.  **Adaptive Length (CRITICAL):** The length and detail of your response should adapt to the situation.
    *   If the objection is simple (e.g., "I'm busy") and/or the Knowledge Base is sparse, provide a **concise and brief** rebuttal (2-3 sentences) focused on re-engaging.
    *   If the objection is complex or detailed, and the Knowledge Base offers rich, relevant information, provide a **more detailed, self-explanatory rebuttal** (4-5 sentences). Explain the 'why' behind your points, using the KB context to build a stronger, more persuasive case.
2.  **Mandatory Structure (ABBC/Q - Acknowledge, Bridge, Benefit, Clarify/Question):**
    *   **(A) Acknowledge:** ALWAYS start with an empathetic acknowledgment of their point. (e.g., "I completely understand that...", "That's a very fair point...").
    *   **(B) Bridge:** Smoothly transition from their concern to your point. (e.g., "...and that's exactly why so many of our subscribers find value in...", "...what many users appreciate in that situation is...").
    *   **(B) Benefit (from KB/Website):** Present the most impactful counter-point(s) as a direct benefit to them. This is your core argument. Be as detailed as necessary to be persuasive.
    *   **(C/Q) Clarify/Question:** End with a soft, open-ended question to re-engage them. (e.g., "Does that way of looking at the value resonate with you?", "Perhaps that might help with the time issue?").
3.  **Tone & Language:**
    *   **Empathetic & Confident:** Sound like you are on their side but are confident in the product's value.
    *   **No Jargon:** Use simple, crystal-clear language.
    *   **No Dismissiveness:** NEVER say "But...", "Actually...", or directly contradict them. Reframe, don't argue.

Generate the final 'rebuttal' field based on your analysis and this strict rubric.
`,model:f.e.MULTIMODAL_PRIMARY,config:{temperature:.3}});function j(a){console.warn("Executing non-AI fallback for rebuttal generation.");let{objection:b,knowledgeBaseContext:c}=a,d=b.toLowerCase(),e="general";["price","expensive","cost","costly","budget","money"].some(a=>d.includes(a))?e="price":["time","busy","later","schedule"].some(a=>d.includes(a))?e="time":["free","useful","value","benefit","already get","don't need"].some(a=>d.includes(a))?e="value":["tried before","experience","trust"].some(a=>d.includes(a))&&(e="trust");let f="";if(c&&!c.includes("No specific knowledge base")){let a=c.split(/[.!?]/).map(a=>a.trim()).filter(a=>a.length>15);if(a.length>0){for(let b of({price:["value","save","worth","benefit","exclusive","investment"],time:["quick","save time","efficient","summary","briefing"],value:["exclusive","ad-free","in-depth","analysis","reports","unbiased"],trust:["trusted","expert","reliable","in-depth"],general:["benefit","feature","value","exclusive","insight"]})[e]){let c=a.find(a=>a.toLowerCase().includes(b));if(c){f=c.substring(0,150).split(",")[0]+".";break}}f||(f=a[0].substring(0,150)+"...")}}let g="";switch(e){case"price":g=`I completely understand that price is an important factor. That's why many subscribers feel the service provides excellent value. For instance, ${f||"the exclusive insights can help in making informed decisions that far outweigh the cost."} Would you be open to exploring how it might fit your budget?`;break;case"time":g=`I can certainly appreciate how busy you are, and that's exactly why this service is so helpful. It's designed to give you the most important insights efficiently. For example, ${f||"you get curated briefings that save you valuable time."} This way, you stay informed without the noise.`;break;case"value":g=`That's a fair point, there is a lot of free information out there. What our members value is the trusted, in-depth analysis without the clutter. For example, ${f||"you get exclusive, expert-led content."} This helps you focus on what truly matters.`;break;case"trust":g=`I understand your hesitation based on past experiences. We are always working to improve our service for our members. The focus is on providing ${f||"deeply researched and reliable content from trusted experts."} Perhaps we could briefly discuss what would make it more valuable for you now?`;break;default:g=`I understand. Just so I can provide the most relevant information, could you tell me a little more about your main priority right now? Many find that ${f||"the exclusive analysis here is a key benefit."} This helps me see if it's even a good fit for you.`}let h=g.split(/\\s+/);return h.length>100&&(g=h.slice(0,99).join(" ")+"..."),{rebuttal:g}}let k=e.ai.defineFlow({name:"generateRebuttalFlow",inputSchema:g._x,outputSchema:g.Ph},async a=>{if(!a.knowledgeBaseContext||a.knowledgeBaseContext.trim().length<50||a.knowledgeBaseContext.includes("No specific knowledge base content found"))return console.warn("Rebuttal generation using fallback due to insufficient Knowledge Base."),j(a);try{let{output:b}=await i(a);if(!b||!b.rebuttal||b.rebuttal.trim().length<10)throw Error("Primary AI model returned an insufficient or empty response.");return b}catch(b){return console.error("Rebuttal generation by AI failed:",b.message),j(a)}});async function l(a){try{let b=g._x.safeParse(a);if(!b.success){let c=b.error.errors.map(a=>`${a.path.join(".")}: ${a.message}`).join("; ");return console.error("Invalid input for generateRebuttal:",c),j({...a,objection:`(System input error) ${a.objection}`})}return await k(b.data)}catch(b){return console.error("Catastrophic error in generateRebuttal exported function:",JSON.stringify(b,Object.getOwnPropertyNames(b),2)),j(a)}}(0,h.D)([l]),(0,d.A)(l,"40ddbb4bb294900f46ec035623b87b51b68fc7f373",null)},27186:(a,b,c)=>{c.d(b,{C5:()=>s,MJ:()=>q,Rr:()=>r,eI:()=>o,lR:()=>p,lV:()=>j,zB:()=>l});var d=c(21124),e=c(38301),f=c(96425),g=c(31980),h=c(44943),i=c(68120);let j=g.Op,k=e.createContext({}),l=({...a})=>(0,d.jsx)(k.Provider,{value:{name:a.name},children:(0,d.jsx)(g.xI,{...a})}),m=()=>{let a=e.useContext(k),b=e.useContext(n),{getFieldState:c,formState:d}=(0,g.xW)(),f=c(a.name,d);if(!a)throw Error("useFormField should be used within <FormField>");let{id:h}=b;return{id:h,name:a.name,formItemId:`${h}-form-item`,formDescriptionId:`${h}-form-item-description`,formMessageId:`${h}-form-item-message`,...f}},n=e.createContext({}),o=e.forwardRef(({className:a,...b},c)=>{let f=e.useId();return(0,d.jsx)(n.Provider,{value:{id:f},children:(0,d.jsx)("div",{ref:c,className:(0,h.cn)("space-y-2",a),...b})})});o.displayName="FormItem";let p=e.forwardRef(({className:a,...b},c)=>{let{error:e,formItemId:f}=m();return(0,d.jsx)(i.J,{ref:c,className:(0,h.cn)(e&&"text-destructive",a),htmlFor:f,...b})});p.displayName="FormLabel";let q=e.forwardRef(({...a},b)=>{let{error:c,formItemId:e,formDescriptionId:g,formMessageId:h}=m();return(0,d.jsx)(f.DX,{ref:b,id:e,"aria-describedby":c?`${g} ${h}`:`${g}`,"aria-invalid":!!c,...a})});q.displayName="FormControl";let r=e.forwardRef(({className:a,...b},c)=>{let{formDescriptionId:e}=m();return(0,d.jsx)("p",{ref:c,id:e,className:(0,h.cn)("text-sm text-muted-foreground",a),...b})});r.displayName="FormDescription";let s=e.forwardRef(({className:a,children:b,...c},e)=>{let{error:f,formMessageId:g}=m(),i=f?String(f?.message??""):b;return i?(0,d.jsx)("p",{ref:e,id:g,className:(0,h.cn)("text-sm font-medium text-destructive",a),...c,children:i}):null});s.displayName="FormMessage"},45608:(a,b,c)=>{c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var d=c(21124),e=c(38301),f=c(45693),g=c(57105),h=c(76488),i=c(8015),j=c(44943);let k=f.bL;f.YJ;let l=f.WT,m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.l9,{ref:e,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[b,(0,d.jsx)(f.In,{asChild:!0,children:(0,d.jsx)(g.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=f.l9.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.PP,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(h.A,{className:"h-4 w-4"})}));n.displayName=f.PP.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wn,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})}));o.displayName=f.wn.displayName;let p=e.forwardRef(({className:a,children:b,position:c="popper",...e},g)=>(0,d.jsx)(f.ZL,{children:(0,d.jsxs)(f.UC,{ref:g,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...e,children:[(0,d.jsx)(n,{}),(0,d.jsx)(f.LM,{className:(0,j.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,d.jsx)(o,{})]})}));p.displayName=f.UC.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.JU,{ref:c,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=f.JU.displayName;let q=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.q7,{ref:e,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-4 w-4"})})}),(0,d.jsx)(f.p4,{children:b})]}));q.displayName=f.q7.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=f.wv.displayName},46565:(a,b,c)=>{c.d(b,{u:()=>q});var d=c(21124),e=c(50937),f=c(31980),g=c(41803),h=c(35284),i=c(27186),j=c(68254),k=c(62186),l=c(7952);let m=(0,c(8808).A)("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);c(38301);var n=c(45608);let o=g.Ik({product:g.Yj().min(1,"Product must be selected."),objection:g.Yj().min(5,{message:"Objection must be at least 5 characters."}).max(500,{message:"Objection must be at most 500 characters."})}),p=["It's too expensive for me right now.","I don't have time to use it.","I get enough news for free already.","I'll think about it and get back to you.","Can you send me the details on WhatsApp?","I tried it before and didn't find it useful."];function q({onSubmit:a,isLoading:b}){let{availableProducts:c}=(0,l.G)(),g=(0,f.mN)({resolver:(0,e.u)(o),defaultValues:{objection:"",product:""}});return(0,d.jsxs)(k.Zp,{className:"w-full max-w-lg shadow-lg",children:[(0,d.jsxs)(k.aR,{children:[(0,d.jsx)(k.ZB,{className:"text-xl",children:"Generate Rebuttal"}),(0,d.jsx)(k.BT,{children:"Enter the customer's objection to get an AI-assisted rebuttal based on the selected product's Knowledge Base."})]}),(0,d.jsx)(k.Wu,{children:(0,d.jsx)(i.lV,{...g,children:(0,d.jsxs)("form",{onSubmit:g.handleSubmit(b=>{a(b)}),className:"space-y-6",children:[(0,d.jsx)(i.zB,{control:g.control,name:"product",render:({field:a})=>(0,d.jsxs)(i.eI,{children:[(0,d.jsxs)(i.lR,{children:["Product ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value||"",children:[(0,d.jsx)(i.MJ,{children:(0,d.jsx)(n.bq,{children:(0,d.jsx)(n.yv,{placeholder:"Select a product for context"})})}),(0,d.jsx)(n.gC,{children:c.map(a=>(0,d.jsx)(n.eb,{value:a.name,children:a.displayName},a.name))})]}),(0,d.jsx)(i.C5,{})]})}),(0,d.jsx)(i.zB,{control:g.control,name:"objection",render:({field:a})=>(0,d.jsxs)(i.eI,{children:[(0,d.jsxs)(i.lR,{children:["Customer Objection ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(i.MJ,{children:(0,d.jsx)(j.T,{placeholder:"e.g., 'It's too expensive for me right now.'",className:"resize-none",rows:3,...a})}),(0,d.jsx)(i.C5,{})]})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.lR,{className:"text-xs text-muted-foreground",children:"Quick Start with Common Objections:"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map((a,b)=>(0,d.jsxs)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{g.setValue("objection",a)},className:"text-xs",children:[(0,d.jsx)(m,{className:"mr-1.5 h-3.5 w-3.5"})," ",a]},b))})]}),(0,d.jsx)(h.$,{type:"submit",className:"w-full",disabled:b||!g.getValues("product"),children:b?"Generating...":"Get Rebuttal"})]})})})]})}},56571:(a,b,c)=>{c.d(b,{e:()=>d});let d={MULTIMODAL_PRIMARY:"googleai/gemini-2.0-flash",MULTIMODAL_SECONDARY:"googleai/gemini-1.5-pro",TEXT_ONLY:"googleai/gemini-2.0-flash"}},62784:(a,b,c)=>{c.d(b,{b:()=>e});var d=c(85708);let e=(0,d.createServerReference)("40ddbb4bb294900f46ec035623b87b51b68fc7f373",d.callServer,void 0,d.findSourceMapURL,"generateRebuttal")},68254:(a,b,c)=>{c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},97137:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(8808).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},99421:(a,b,c)=>{c.d(b,{C:()=>i});var d=c(21124),e=c(35284),f=c(62186),g=c(37448),h=c(97137);function i({rebuttal:a}){let{toast:b}=(0,g.dj)();return(0,d.jsxs)(f.Zp,{className:"w-full max-w-lg shadow-xl mt-8",children:[(0,d.jsx)(f.aR,{children:(0,d.jsx)(f.ZB,{className:"text-xl text-primary",children:"Suggested Rebuttal"})}),(0,d.jsxs)(f.Wu,{children:[(0,d.jsx)("p",{className:"text-muted-foreground whitespace-pre-line leading-relaxed",children:a.rebuttal}),(0,d.jsx)("div",{className:"mt-4 flex justify-end",children:(0,d.jsxs)(e.$,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(a.rebuttal).then(()=>b({title:"Success",description:"Rebuttal copied to clipboard!"})).catch(()=>b({variant:"destructive",title:"Error",description:"Failed to copy rebuttal."}))},children:[(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Copy Rebuttal"]})})]})]})}},99599:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(8808).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])}};