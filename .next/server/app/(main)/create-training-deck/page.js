(()=>{var a={};a.id=2965,a.ids=[2965],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},643:a=>{"use strict";a.exports=require("node:perf_hooks")},1708:a=>{"use strict";a.exports=require("node:process")},2980:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:a=>{"use strict";a.exports=require("node:buffer")},7252:a=>{"use strict";a.exports=require("express")},8086:a=>{"use strict";a.exports=require("module")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:a=>{"use strict";a.exports=require("assert")},14985:a=>{"use strict";a.exports=require("dns")},15762:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"40c5efe69707c1f879d8952d619ed6dea8947490e7":()=>j});var d=c(91488);c(27806);var e=c(38710),f=c(87603),g=c(40410);let h=e.ai.definePrompt({name:"generateTrainingMaterialPrompt",input:{schema:f.E3},output:{schema:f.vU},prompt:`You are a presentation and documentation specialist trained to create professional training material, particularly for telesales businesses like {{{product}}}.

Product: {{{product}}}
Target Output Format: {{{deckFormatHint}}}
Source of Information Context: {{{sourceDescriptionForAi}}}

Contextual Information Provided (KnowledgeBase Items/Direct Prompt/Uploaded File Context):
{{#if knowledgeBaseItems.length}}
{{#each knowledgeBaseItems}}
- Item Name: {{name}} (Type: {{#if isTextEntry}}Text Entry/Direct Prompt{{else}}{{fileType}}{{/if}})
  {{#if textContent}}Content (excerpt if long): {{{textContent}}}{{else}}(File content not directly viewable, rely on name, type, and overall user prompt for context){{/if}}
{{/each}}
{{else}}
(No specific contextual items provided. If so, generate a generic welcome/overview for {{{product}}} or a placeholder training structure.)
{{/if}}
{{#if generateFromAllKb}}
(The user has indicated to use the entire knowledge base for product '{{{product}}}', represented by the items above if populated, otherwise assume general knowledge about {{{product}}} for a basic structure.)
{{/if}}

Your Task:
Generate content for a training material (deck or brochure).
1.  Create a compelling 'deckTitle'.
2.  Structure the content into logical 'sections' (at least 3). Each section needs a 'title', 'content', and optional 'notes'.

Decide which structure to use based on the following priority:

**Special Case 1: "ET Prime – Sales Training Deck"**
If the 'product' is 'ET' AND the 'Source of Information Context' or the names/content of 'Contextual Information Provided' CLEARLY indicate the goal is to create an "ET Prime – Sales Training Deck" (e.g., user prompt explicitly asks for "ET Prime sales training" or KB items are about ET Prime sales enablement), then you MUST structure your output using the following framework. Use the provided 'Contextual Information' (KnowledgeBase) to flesh out details where possible (e.g., what 'Premium access to' refers to). If the KB lacks specifics for a point, state that and suggest referring to the full KB.

    --- BEGIN ET PRIME SALES TRAINING DECK FRAMEWORK ---
    Deck Title: "ET Prime – Sales Training Deck"
    Sections:
    1.  Title: "Title Slide"
        Content: "Title: ET Prime – Sales Training Deck
Subtitle: Empowering Agents to Convert with Confidence
One-liner: Premium subscription for investors, professionals, and business readers"
        Notes: "Opening slide. Keep it clean and impactful."
    2.  Title: "What is ET Prime?"
        Content: "ET Prime is the premium subscription product from The Economic Times, India's leading business daily. It offers unique value through expert-led business journalism, in-depth trend forecasting, and a completely ad-free reading experience, ensuring focused consumption of critical business information."
        Notes: "Emphasize exclusivity and value beyond standard news."
    3.  Title: "Key Benefits"
        Content: "- Ad-free experience across all ET platforms
- Deep-dive stories and data-led insights on market trends, companies, and policy
- Access to 25+ sectoral newsletters offering specialized coverage
- Daily investor briefings summarizing key market movements and stock ideas
- Premium access to [AI: Refer to 'Contextual Information Provided' for specific ET Prime features like ET Portfolio, Stock Screener, Archives etc. If not explicitly mentioned, state 'a suite of exclusive tools and content - check full KB for details.']"
        Notes: "Highlight what makes ET Prime indispensable. Use bullet points for clarity."
    --- END ET PRIME SALES TRAINING DECK FRAMEWORK ---
    When using this framework, ensure the content for each section is comprehensive and adheres to the output format style.

**Special Case 2: "Telesales Data Analysis Framework"**
If Special Case 1 does NOT apply, AND the 'Source of Information Context' or the names/content of 'Contextual Information Provided' CLEARLY indicate the goal is to create a "Telesales Data Analysis Framework" deck explaining how to conduct full-funnel data analysis using MIS, call records, leads, and revenue data, then you MUST structure your output according to the following 9-section framework:

    --- BEGIN TELESALES DATA ANALYSIS FRAMEWORK ---
    Deck Title: "Telesales Data Analysis Framework"
    Sections:
    1.  Title: "Title Slide"
        Content: "Title: Telesales Data Analysis Framework
Subtitle: {{{product}}} | Agent Performance & Revenue Intelligence"
        Notes: "Use the provided 'product' name (ET or TOI) in the subtitle."
    2.  Title: "Objective"
        Content: "Explain the purpose: to drive actionable insights from agent data, call logs, and campaign performance across lead cohorts for {{{product}}}."
    3.  Title: "Data Sources Overview"
        Content: "List and briefly explain each data input typically used for {{{product}}} analysis (e.g., ET MIS, CDR Dump, Source Dump, Monthly Revenue Report, Training Impact Report). Use 'Contextual Information Provided' if specific file names or types are mentioned."
    4.  Title: "Key Metrics Tracked"
        Content: "List key metrics: Conversion Rate, Revenue per Call, Follow-Up Rate, Connection Rate, Average Talktime, Agent Performance Index (composite). Define briefly if needed based on {{{product}}} context."
    5.  Title: "Analytical Steps"
        Content: "Step-by-step method to clean, process, and analyze each dataset. How to join data using Agent ID, Phone, Lead ID. How to segment by cohort (e.g. Payment Drop-off vs Paywall for {{{product}}})."
    6.  Title: "Sample Analysis Output"
        Content: "Describe (do not generate actual charts/tables, but describe what they would show): Monthly trend graph for {{{product}}} sales, Agent leaderboard table, Cohort conversion summary, Follow-up gap analysis."
    7.  Title: "Recommendations Framework"
        Content: "How to translate insights into business actions for {{{product}}}: Redistribute leads, Train specific agents, Optimize follow-up timing, Adjust incentive slabs."
    8.  Title: "Checklist for Analysts"
        Content: "Data validation, Mapping fields, Cohort tagging for {{{product}}} leads, Cross-sheet joining logic, Final insight synthesis."
    9.  Title: "Closing Slide"
        Content: "Summary: Data-backed decisions = Scaled revenue for {{{product}}}
Call to Action: Run this analysis every month to stay ahead."
    --- END TELESALES DATA ANALYSIS FRAMEWORK ---
    When using this framework, ensure the content for each section is comprehensive and aligns with the style guidance below. If the Contextual Information provides specific details relevant to any of these sections, incorporate them.

**General Case (If neither Special Case 1 nor Special Case 2 applies):**
Synthesize the provided 'Contextual Information' (KnowledgeBase Items/Direct Prompt/Uploaded File Context) into a relevant and well-structured training material. The sections should logically flow from the input. If multiple KB items are provided, try to weave them into a cohesive narrative or structure. If only a single text prompt is given, expand on that prompt to create the material.

**Content Style Guidance based on '{{{deckFormatHint}}}':**
- If 'deckFormatHint' is 'PDF' or 'Brochure':
    - The 'content' for each section should be more narrative and paragraph-based. For 'Brochure', make it persuasive and benefit-oriented. Include TEXTUAL suggestions for visuals (e.g., "(Visual: Chart showing growth of Conversion Rate month-over-month)").
    - 'Notes' for 'Brochure' can be layout/visual suggestions. For 'PDF', they can be supplementary details.
- If 'deckFormatHint' is 'Word Doc' or 'PPT':
    - The 'content' for each section should be concise, primarily using bullet points or short, impactful statements.
    - 'Notes' can be speaker notes for PPT, or detailed explanations for a Word outline.

Focus on clarity, professionalism, and business relevance to {{{product}}}. Ensure the output is detailed and comprehensive.
If the contextual information is very sparse or too generic to create meaningful content for the chosen product and format, explicitly state that in the output, perhaps in the first section, and provide a placeholder structure or general advice.
Ensure your output strictly adheres to the 'GenerateTrainingDeckOutputSchema'.
`,model:"googleai/gemini-2.0-flash"}),i=e.ai.defineFlow({name:"generateTrainingDeckFlow",inputSchema:f.E3,outputSchema:f.vU},async a=>{try{let{output:b}=await h(a);if(!b)throw Error("AI failed to generate training material content.");if(!b.deckTitle||!Array.isArray(b.sections)||b.sections.length<1){console.error("AI output missing required fields (deckTitle or sections array). Input was:",JSON.stringify(a,null,2));let b="Brochure"===a.deckFormatHint?"Brochure":"Deck";return{deckTitle:`Error Generating ${b} - Invalid AI Response Structure`,sections:[{title:"Structural Error",content:"The AI's response did not match the expected structure. It may have failed to generate a title or section details. Please try again or simplify the input context.",notes:"AI response structure was malformed."},{title:"Input Context Sent",content:`Product: ${a.product}, Format: ${a.deckFormatHint}, Source: ${a.sourceDescriptionForAi||"N/A"}`}]}}return b}catch(c){console.error("Error in generateTrainingDeckFlow:",c);let b="Brochure"===a.deckFormatHint?"Brochure":"Deck";return{deckTitle:`Error Generating ${b} - AI Failed`,sections:[{title:"Error",content:`AI service failed: ${c.message}. Ensure Google API Key is set and valid.`,notes:"Check API key and try again."},{title:"Instructions",content:"The AI could not generate the content. Please review your input and ensure all selected knowledge base items (if any) are appropriate."},{title:"Support",content:"If the issue persists, contact support."}]}}});async function j(a){try{if(!a.generateFromAllKb&&(!a.knowledgeBaseItems||0===a.knowledgeBaseItems.length)){let b="Brochure"===a.deckFormatHint?"Brochure":"Deck";return console.warn("generateTrainingDeck called with no KB items/prompt/uploads and not generateFromAllKb. Input:",JSON.stringify(a,null,2)),{deckTitle:`Input Error - No Context for ${b}`,sections:[{title:"Missing Context",content:"No knowledge base items, direct prompt, or file uploads were provided to generate the training material. Please select items from the Knowledge Base, upload files, or provide a direct prompt on the 'Create Training Material' page.",notes:"User did not provide sufficient context."}]}}let b={...a,knowledgeBaseItems:(a.knowledgeBaseItems||[]).map(a=>({...a,textContent:a.textContent&&a.textContent.length>2e3?a.textContent.substring(0,2e3)+"\n...(textContent truncated due to length)":a.textContent}))};return await i(b)}catch(c){console.error("Catastrophic error calling generateTrainingDeckFlow:",c);let b="Brochure"===a.deckFormatHint?"Brochure":"Deck";return{deckTitle:`Critical Error Generating ${b}`,sections:[{title:"System Error",content:`A critical server-side error occurred: ${c.message}. Check server logs.`,notes:"This indicates a system-level problem."},{title:"Failure",content:"The training material generation service encountered a critical failure."},{title:"Next Steps",content:"Please try again later or contact support if the issue persists."}]}}}(0,g.D)([j]),(0,d.A)(j,"40c5efe69707c1f879d8952d619ed6dea8947490e7",null)},15771:(a,b,c)=>{Promise.resolve().then(c.bind(c,42689))},16698:a=>{"use strict";a.exports=require("node:async_hooks")},17715:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},19063:a=>{"use strict";a.exports=require("require-in-the-middle")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19185:a=>{"use strict";a.exports=require("dgram")},19771:a=>{"use strict";a.exports=require("process")},21820:a=>{"use strict";a.exports=require("os")},22858:(a,b,c)=>{"use strict";function d(a,b){if(!b||!b.length)return;let c=Object.keys(b[0]),d=new Blob([c.join(",")+"\n"+b.map(a=>c.map(b=>{let c=null===a[b]||void 0===a[b]?"":a[b];return(c=c instanceof Date?c.toLocaleString():c.toString().replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(c=`"${c}"`),c}).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a");if(void 0!==e.download){let b=URL.createObjectURL(d);e.setAttribute("href",b),e.setAttribute("download",a),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(b)}}function e(a,b){let c=new Blob([b],{type:a.endsWith(".doc")?"application/msword":"text/plain;charset=utf-8;"}),d=document.createElement("a");if(void 0!==d.download){let b=URL.createObjectURL(c);d.setAttribute("href",b),d.setAttribute("download",a),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(b)}}async function f(a,b){if(!a)return void console.error("No audio reference provided, cannot download.");let c=null;if(a.startsWith("data:")){if(!(c=function(a){if(!a||!a.includes(","))return null;try{let b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d);for(let a=0;a<b.length;a++)e[a]=b.charCodeAt(a);return new Blob([d],{type:c})}catch(a){return console.error("Error converting data URI to Blob:",a),null}}(a)))return void console.error("Failed to convert Data URI to Blob for download.")}else try{let b=await fetch(a);if(!b.ok)throw Error(`Failed to fetch audio asset (${b.status})`);c=await b.blob()}catch(a){console.error("Unable to download remote audio asset:",a);return}let d=document.createElement("a");if(void 0!==d.download&&c){let a=URL.createObjectURL(c);d.setAttribute("href",a),d.setAttribute("download",b),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(a)}}function g(a,b,c){let d=function(a,b,c){let d="",e=a.map((a,c)=>{let d=a.length;return b.forEach(a=>{let b=String(null===a[c]||void 0===a[c]?"":a[c]);b.length>d&&(d=b.length)}),d}),f=a.map((a,b)=>a.padEnd(e[b])).join(" | ");return d+=f+"\n"+a.map((a,b)=>"-".repeat(e[b])).join("-+-")+"\n",b.forEach(a=>{let b=a.map((a,b)=>String(null==a?"":a).padEnd(e[b])).join(" | ");d+=b+"\n"}),d}(b,c);e(a.endsWith(".doc")?a:`${a}.doc`,d)}async function h(a,b,d){let{jsPDF:e}=await c.e(5039).then(c.bind(c,75039)),{default:f}=await c.e(7439).then(c.bind(c,57439)),g=new e({orientation:"landscape"});f(g,{head:[b],body:d,styles:{fontSize:8},headStyles:{fillColor:[41,128,185]},margin:{top:20},didDrawPage:function(a){g.setFontSize(16),g.text("Exported Table Data",a.settings.margin.left,15)}}),g.save(a.endsWith(".pdf")?a:`${a}.pdf`)}c.d(b,{U3:()=>e,e3:()=>h,mf:()=>g,vG:()=>f,yR:()=>d})},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},28430:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]])},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},37067:a=>{"use strict";a.exports=require("node:http")},37830:a=>{"use strict";a.exports=require("node:stream/web")},38438:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},38522:a=>{"use strict";a.exports=require("node:zlib")},39611:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]])},40068:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>l,Es:()=>n,L3:()=>o,c7:()=>m,lG:()=>i,rr:()=>p});var d=c(21124),e=c(38301),f=c(39641),g=c(90447),h=c(44943);let i=f.bL;f.l9;let j=f.ZL;f.bm;let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));k.displayName=f.hJ.displayName;let l=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(j,{children:[(0,d.jsx)(k,{}),(0,d.jsxs)(f.UC,{ref:e,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));l.displayName=f.UC.displayName;let m=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});m.displayName="DialogHeader";let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});n.displayName="DialogFooter";let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));o.displayName=f.hE.displayName;let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));p.displayName=f.VY.displayName},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},42689:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>Q});var d=c(21124),e=c(38301),f=c(89266),g=c(62186),h=c(35284),i=c(68120),j=c(93758),k=c(45608),l=c(44183),m=c(22741),n=c(51115),o=c(8808);let p=(0,o.A)("FileType2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 13v-1h6v1",key:"1dh9dg"}],["path",{d:"M5 12v6",key:"150t9c"}],["path",{d:"M4 18h2",key:"1xrofg"}]]),q=(0,o.A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var r=c(39611),s=c(14311),t=c(38438),u=c(2980),v=c(17715),w=c(28430),x=c(97137),y=c(6375),z=c(37448),A=c(85708);let B=(0,A.createServerReference)("40c5efe69707c1f879d8952d619ed6dea8947490e7",A.callServer,void 0,A.findSourceMapURL,"generateTrainingDeck");var C=c(90629),D=c(48536),E=c(22858),F=c(80665),G=c(45019),H=c(64772),I=c(40068),J=c(68254),K=c(6471),L=c(50526),M=c(25054),N=c(89308),O=c(7952);let P=["PDF","Word Doc","PPT","Brochure"];function Q(){let{files:a}=(0,l.J)(),{availableProducts:b,getProductByName:c}=(0,O.G)(),[o,A]=(0,e.useState)([]),[Q,R]=(0,e.useState)(void 0),[S,T]=(0,e.useState)(P[0]),[U,V]=(0,e.useState)(!1),[W,X]=(0,e.useState)(null),[Y,Z]=(0,e.useState)(null),{toast:$}=(0,z.dj)(),{logActivity:_}=(0,C.Z)(),[aa,ab]=(0,e.useState)(!1),[ac,ad]=(0,e.useState)([]),ae=(0,e.useRef)(null),[af,ag]=(0,e.useState)(!1),[ah,ai]=(0,e.useState)(""),aj=(0,e.useMemo)(()=>a.filter(a=>o.includes(a.id)),[a,o]),ak=a=>a.map(a=>({name:a.name,textContent:a.isTextEntry?a.textContent:void 0,isTextEntry:!!a.isTextEntry,fileType:a.isTextEntry?"text/plain":a.type})),al=async a=>{let b=[];for(let c of a){let a;if(c.type.startsWith("text/")&&c.size<5e4)try{a=await c.text()}catch(a){console.warn(`Could not read text content for uploaded file ${c.name}`,a)}b.push({name:c.name,textContent:a,isTextEntry:!1,fileType:c.type})}return b},am=async b=>{if(V(!0),X(null),Z(null),!Q){$({variant:"destructive",title:"Product Not Selected",description:"Please select a product."}),V(!1);return}if(!S){$({variant:"destructive",title:"Format Not Selected",description:"Please select an output format."}),V(!1);return}let c=[],d=!1,e="",f="none";if("entire_kb"===b?f="entire_kb":ah.trim().length>=10?f="direct_prompt":ac.length>0?f="direct_uploads":aj.length>0&&(f="selected_kb"),"none"===f&&"entire_kb"!==b){$({variant:"destructive",title:"No Context Provided",description:"Please provide a direct prompt, upload files, or select KB items to generate material."}),V(!1);return}if("direct_prompt"===f)c.push({name:"User-Provided Prompt",textContent:ah,isTextEntry:!0,fileType:"text/plain"}),e="context from a direct user-provided prompt";else if("direct_uploads"===f)c=await al(ac),e=`context from ${ac.length} directly uploaded file(s): ${ac.map(a=>a.name).join(", ")}`;else if("selected_kb"===f)c=ak(aj),e=`context from ${aj.length} selected Knowledge Base item(s): ${aj.map(a=>a.name).join(", ")}`;else if("entire_kb"===f){let b=a.filter(a=>a.product===Q);if(0===b.length){$({variant:"destructive",title:"KB Empty for Product",description:`Knowledge Base is empty for ${Q}. Add files/text entries via 'Knowledge Base Management'.`}),V(!1);return}c=ak(b),d=!0,e=`context from the entire Knowledge Base for product ${Q}`}let g={product:Q,deckFormatHint:S,knowledgeBaseItems:c,generateFromAllKb:d,sourceDescriptionForAi:e};try{let a=await B(g),b="Brochure"===S?"Brochure":"Deck";a.deckTitle.startsWith("Error Generating")||a.deckTitle.startsWith("Critical Error")||a.deckTitle.startsWith("Input Error")?(Z(a.sections[0]?.content||`AI failed to generate ${b.toLowerCase()} content.`),X(null),$({variant:"destructive",title:`${b} Generation Failed`,description:a.sections[0]?.content||"AI reported an error."})):(X(a),$({title:`Training ${b} Generated!`,description:`${b} for ${Q} is ready.`})),_({module:"Create Training Material",product:Q,details:{materialOutput:a,inputData:g}})}catch(c){console.error("Error generating training material:",c);let a=c instanceof Error?c.message:"An unexpected AI error occurred.";Z(a);let b="Brochure"===S?"Brochure":"Deck";$({variant:"destructive",title:`${b} Generation Failed`,description:a}),_({module:"Create Training Material",product:Q,details:{error:a,inputData:g}})}finally{V(!1)}},an=(a,b)=>{let c=`${"Brochure"===b?"Brochure":"Deck"} Title: ${a.deckTitle}
`;return c+=`Product: ${Q}
Format: ${b}

`,a.sections.forEach((a,d)=>{c+=`--------------------------------------------------
${"Brochure"===b?"Section/Panel":"Slide"} ${d+1}: ${a.title}
--------------------------------------------------
${a.content}

`,a.notes&&(c+=`${"Brochure"===b?"Internal Notes/Suggestions":"Speaker Notes"}:
${a.notes}

`)}),c},ao="Brochure"===S?"Brochure":"Deck",ap=aa&&Q&&S&&(ah.trim().length>=10||ac.length>0||o.length>0),aq=aa&&Q&&S&&a.filter(a=>a.product===Q).length>0;return(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsx)(f.z,{title:`Create Training ${ao}`}),(0,d.jsxs)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6 flex flex-col items-center",children:[(0,d.jsxs)(g.Zp,{className:"w-full max-w-2xl shadow-lg",children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsxs)(g.ZB,{className:"text-xl text-primary flex items-center",children:[(0,d.jsx)(m.A,{className:"h-6 w-6 mr-3"}),"Configure Training ",ao]}),(0,d.jsx)(g.BT,{children:"Select product, format, and a source of context for generation. Choose one: direct prompt, direct file uploads, or select from Knowledge Base."})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(i.J,{htmlFor:"product-select",className:"mb-1.5 block flex items-center",children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Product ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsxs)(k.l6,{value:Q,onValueChange:a=>R(a),children:[(0,d.jsx)(k.bq,{id:"product-select",children:(0,d.jsx)(k.yv,{placeholder:"Select Product"})}),(0,d.jsx)(k.gC,{children:b.map(a=>(0,d.jsx)(k.eb,{value:a.name,children:a.displayName},a.name))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(i.J,{htmlFor:"format-select",className:"mb-1.5 block flex items-center",children:[(0,d.jsx)(p,{className:"h-4 w-4 mr-2"}),"Output Format"]}),(0,d.jsxs)(k.l6,{value:S,onValueChange:a=>T(a),children:[(0,d.jsx)(k.bq,{id:"format-select",children:(0,d.jsx)(k.yv,{placeholder:"Select Output Format"})}),(0,d.jsx)(k.gC,{children:P.map(a=>(0,d.jsx)(k.eb,{value:a,children:a},a))})]})]})]}),(0,d.jsxs)("div",{className:"relative my-5",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,d.jsx)("span",{className:"w-full border-t"})}),(0,d.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,d.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Choose ONE Source Context"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(i.J,{htmlFor:"direct-prompt",className:"mb-1.5 block flex items-center",children:[(0,d.jsx)(q,{className:"h-4 w-4 mr-2"}),"Direct Prompt"]}),(0,d.jsx)(J.T,{id:"direct-prompt",placeholder:"Enter your detailed prompt here. Describe the training material you want, its purpose, key topics, target audience, desired tone, etc. (Min 10 characters)",value:ah,onChange:a=>{ai(a.target.value),a.target.value.trim().length>0&&(ad([]),A([]),ae.current&&(ae.current.value=""))},className:"min-h-[100px]",disabled:U})]}),(0,d.jsxs)("div",{className:"relative my-3",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,d.jsx)("span",{className:"w-full border-t"})}),(0,d.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,d.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(i.J,{htmlFor:"direct-upload-files",className:"mb-1.5 block flex items-center",children:[(0,d.jsx)(r.A,{className:"h-4 w-4 mr-2"}),"Directly Upload File(s)"]}),(0,d.jsx)(j.p,{id:"direct-upload-files",type:"file",multiple:!0,ref:ae,onChange:a=>{let b=a.target.files;if(b){let a=Array.from(b),c=0;for(let b of a)c+=b.size;if(c>0xa00000){$({variant:"destructive",title:"Upload Limit Exceeded",description:"Total size of selected files exceeds 10MB. Please select fewer or smaller files."}),ad([]),ae.current&&(ae.current.value="");return}ad(a),ai(""),A([])}else ad([])},className:"pt-1.5",disabled:U}),ac.length>0&&(0,d.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ac.length," file(s) selected for direct upload. Total size: ",(ac.reduce((a,b)=>a+b.size,0)/1048576).toFixed(2)," MB."]}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Max total upload size: ",10,"MB. PDF, DOCX, TXT, CSV etc."]})]}),(0,d.jsxs)("div",{className:"relative my-3",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,d.jsx)("span",{className:"w-full border-t"})}),(0,d.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,d.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-1.5",children:[(0,d.jsxs)(i.J,{htmlFor:"kb-files-select",className:"flex items-center",children:[(0,d.jsx)(s.A,{className:"h-4 w-4 mr-2"}),"Select Files from Knowledge Base"]}),o.length>0&&(0,d.jsxs)(h.$,{variant:"outline",size:"xs",onClick:()=>ag(!0),disabled:U,children:[(0,d.jsx)(t.A,{className:"mr-1.5 h-3.5 w-3.5"})," View Selected (",o.length,")"]})]}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:'Use Ctrl/Cmd + Click to select multiple files. Filtered by selected product. View/manage KB on "Knowledge Base Management" page.'}),(0,d.jsxs)("select",{id:"kb-files-select",multiple:!0,value:o,onChange:a=>{let b=a.target.options,c=[];for(let a=0,d=b.length;a<d;a++)b[a].selected&&c.push(b[a].value);A(c),c.length>0&&(ai(""),ad([]),ae.current&&(ae.current.value=""))},className:"w-full p-2 border rounded-md min-h-[100px] bg-background focus:ring-primary focus:border-primary",disabled:!aa||!Q||0===a.filter(a=>a.product===Q).length||U,children:[!aa&&(0,d.jsx)("option",{disabled:!0,children:"Loading files..."}),aa&&(!Q||0===a.filter(a=>a.product===Q).length)&&(0,d.jsx)("option",{disabled:!0,children:"No files in knowledge base for selected product."}),aa&&Q&&a.filter(a=>a.product===Q).length>0&&a.filter(a=>a.product===Q).map(a=>(0,d.jsx)("option",{value:a.id,children:a.isTextEntry?`(Text) ${a.name.substring(0,50)}...`:`(File) ${a.name}`},a.id))]}),o.length>0&&(0,d.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[o.length," KB file(s) selected."]})]}),(0,d.jsx)(K.w,{className:"my-5"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)(h.$,{onClick:()=>am(),className:"w-full py-3 text-base",disabled:U||!ap,children:[(0,d.jsx)(u.A,{className:"mr-2 h-5 w-5"})," Generate from Provided Context"]}),(0,d.jsxs)(h.$,{onClick:()=>am("entire_kb"),variant:"outline",className:"w-full",disabled:U||!aq,children:[(0,d.jsx)(s.A,{className:"mr-2 h-4 w-4"})," Generate from Entire KB for ",Q||"Product"]})]})]})]}),U&&(0,d.jsxs)("div",{className:"mt-6 flex flex-col items-center gap-2",children:[(0,d.jsx)(G.k,{size:32}),(0,d.jsxs)("p",{className:"text-muted-foreground",children:["Generating training ",ao.toLowerCase(),", this may take a moment..."]})]}),Y&&!U&&(0,d.jsxs)(H.Fc,{variant:"destructive",className:"mt-6 max-w-2xl w-full",children:[(0,d.jsx)(v.A,{className:"h-4 w-4"}),(0,d.jsx)(H.XL,{children:"Generation Error"}),(0,d.jsx)(H.TN,{children:Y})]}),W&&!U&&(0,d.jsxs)(g.Zp,{className:"w-full max-w-3xl shadow-xl mt-6",children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-y-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(g.ZB,{className:"text-xl text-primary flex items-center",children:["Brochure"===S?(0,d.jsx)(w.A,{className:"mr-2 h-5 w-5"}):(0,d.jsx)(s.A,{className:"mr-2 h-5 w-5"}),W.deckTitle]}),(0,d.jsxs)(g.BT,{children:["Generated for: ",Q,", Format: ",S]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>(a=>{if(!a||!Q||!S)return;let b=an(a,S);navigator.clipboard.writeText(b).then(()=>$({title:"Success",description:"Material content copied to clipboard!"})).catch(a=>$({variant:"destructive",title:"Error",description:"Failed to copy material content."}))})(W),children:[(0,d.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Copy"]}),(0,d.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>((a,b)=>{if(!a||!b||!Q)return;let c="Brochure"===b?"Brochure":"PDF"===b?"Document":"Outline",d=`Training_${c}_${Q.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}`,e=an(a,b);if("PDF"===b||"Brochure"===b){let a=`${d}.pdf`;(0,D.oc)(e,a),$({title:`${b} Content Exported as PDF`,description:`${a} has been downloaded. This PDF contains the structured text and any AI-suggested placements for visuals.`})}else if("Word Doc"===b){let a=`${d}.doc`;(0,E.U3)(a,e),$({title:"Word Doc Text Outline Downloaded",description:`${a} is a text file. Open it in Word (you may need to rename to .txt if it doesn't open easily) and copy the content to apply styling.`})}else if("PPT"===b){let a=`${d}.doc`;(0,E.U3)(a,e),$({title:"PPT Text Outline Downloaded",description:`${a} is a text file. Open it in PowerPoint and copy the content to apply styling.`})}})(W,S),children:[(0,d.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Download"]})]})]})}),(0,d.jsx)(g.Wu,{children:(0,d.jsx)(N.nD,{type:"multiple",defaultValue:W.sections.map((a,b)=>`section-${b}`),className:"w-full space-y-1",children:W.sections.map((a,b)=>(0,d.jsxs)(N.As,{value:`section-${b}`,children:[(0,d.jsx)(N.$m,{className:"text-md font-semibold hover:no-underline py-2 bg-muted/10 px-3 rounded-t-md [&_svg]:mr-2",children:(0,d.jsxs)("div",{className:"flex items-center",children:["Brochure"===S?(0,d.jsx)(w.A,{className:"mr-2 h-4 w-4 text-accent"}):(0,d.jsx)(s.A,{className:"mr-2 h-4 w-4 text-accent"}),"Brochure"===S?"Section/Panel":"Slide"," ",b+1,": ",a.title]})}),(0,d.jsxs)(N.ub,{className:"pt-2 text-sm bg-muted/20 p-3 rounded-b-md",children:[(0,d.jsx)("p",{className:"text-sm text-foreground whitespace-pre-line",children:a.content}),a.notes&&(0,d.jsxs)("div",{className:"mt-2 p-2 bg-accent/10 rounded-md border border-accent/20",children:[(0,d.jsxs)("p",{className:"text-xs font-semibold text-accent-foreground/80",children:["Brochure"===S?"Internal Notes/Suggestions":"Speaker Notes",":"]}),(0,d.jsx)("p",{className:"text-xs text-accent-foreground/70 whitespace-pre-line",children:a.notes})]})]})]},b))})})]}),!W&&!U&&!Y&&(0,d.jsxs)(g.Zp,{className:"w-full max-w-2xl shadow-sm",children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)(g.ZB,{className:"text-lg flex items-center",children:[(0,d.jsx)(v.A,{className:"h-5 w-5 mr-2 text-accent"}),"How it Works & Output Formats"]})}),(0,d.jsxs)(g.Wu,{className:"text-sm text-muted-foreground space-y-2",children:[(0,d.jsxs)("p",{children:["This AI feature generates ",(0,d.jsx)("strong",{children:"structured text content"})," for your training materials based on the context you provide. It assists with content creation and organization, not with full graphical design or native file formatting."]}),(0,d.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"PDF Format:"}),' Downloads a text-based PDF document. The content is structured as a readable document with sections. If you selected "Brochure" as the format, this PDF will contain persuasive text suitable for brochure panels, including AI\'s textual suggestions for visuals (e.g., "[Visual: Chart showing growth]").']}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Word Doc Format:"})," Downloads a ",(0,d.jsx)("strong",{children:"plain text outline file (.doc)"}),". Open this file (you might need to rename it to .txt if it doesn't open as text) and copy the structured content (titles, bullet points, paragraphs) into Microsoft Word. You can then apply your own styling, templates, and add graphics."]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"PPT Format:"})," Downloads a ",(0,d.jsx)("strong",{children:"plain text outline file (.doc)"}),". Similar to Word Doc, open this file and copy the structured content (slide titles, bullet points) into Microsoft PowerPoint. You can then apply your presentation themes, layouts, and add visuals."]})]}),(0,d.jsx)("p",{className:"font-semibold mt-2",children:"The AI focuses on generating high-quality textual content and logical structure. The final design and formatting in tools like Word, PowerPoint, or design software for brochures remain under your creative control."})]})]}),af&&aj.length>0&&(0,d.jsx)(I.lG,{open:af,onOpenChange:ag,children:(0,d.jsxs)(I.Cf,{className:"sm:max-w-2xl md:max-w-3xl lg:max-w-4xl max-h-[85vh] flex flex-col",children:[(0,d.jsxs)(I.c7,{children:[(0,d.jsxs)(I.L3,{className:"text-primary",children:["Selected Knowledge Base Items (",aj.length,")"]}),(0,d.jsx)(I.rr,{children:"Review the details of the KB items you've chosen for context."})]}),(0,d.jsx)(F.F,{className:"flex-grow p-1 pr-3 -mx-1",children:(0,d.jsx)("div",{className:"space-y-4 p-4 rounded-md",children:aj.map(a=>(0,d.jsxs)(g.Zp,{className:"bg-muted/30",children:[(0,d.jsxs)(g.aR,{className:"pb-3 pt-4 px-4",children:[(0,d.jsx)(g.ZB,{className:"text-md",children:a.name}),(0,d.jsxs)(g.BT,{className:"text-xs",children:["Type: ",a.isTextEntry?"Text Entry":a.type," | Size: ",a.isTextEntry?`${a.size} chars`:a.size," | Product: ",a.product||"N/A"," | Persona: ",a.persona||"N/A"," | Uploaded: ",(0,L.GP)((0,M.H)(a.uploadDate),"PPp")]})]}),a.isTextEntry&&a.textContent&&(0,d.jsxs)(g.Wu,{className:"px-4 pb-4",children:[(0,d.jsx)(i.J,{htmlFor:`kb-view-content-${a.id}`,className:"text-xs font-semibold",children:"Content:"}),(0,d.jsx)(J.T,{id:`kb-view-content-${a.id}`,value:a.textContent,readOnly:!0,className:"mt-1 h-32 bg-background/50 text-xs whitespace-pre-wrap"})]}),!a.isTextEntry&&(0,d.jsx)(g.Wu,{className:"px-4 pb-4",children:(0,d.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"Content of uploaded files cannot be previewed here. This entry is a file reference."})})]},a.id))})}),(0,d.jsx)(I.Es,{className:"pt-4",children:(0,d.jsx)(h.$,{onClick:()=>ag(!1),children:"Close"})})]})})]})]})}},44708:a=>{"use strict";a.exports=require("node:https")},45608:(a,b,c)=>{"use strict";c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var d=c(21124),e=c(38301),f=c(45693),g=c(57105),h=c(76488),i=c(8015),j=c(44943);let k=f.bL;f.YJ;let l=f.WT,m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.l9,{ref:e,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[b,(0,d.jsx)(f.In,{asChild:!0,children:(0,d.jsx)(g.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=f.l9.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.PP,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(h.A,{className:"h-4 w-4"})}));n.displayName=f.PP.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wn,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})}));o.displayName=f.wn.displayName;let p=e.forwardRef(({className:a,children:b,position:c="popper",...e},g)=>(0,d.jsx)(f.ZL,{children:(0,d.jsxs)(f.UC,{ref:g,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...e,children:[(0,d.jsx)(n,{}),(0,d.jsx)(f.LM,{className:(0,j.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,d.jsx)(o,{})]})}));p.displayName=f.UC.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.JU,{ref:c,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=f.JU.displayName;let q=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.q7,{ref:e,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-4 w-4"})})}),(0,d.jsx)(f.p4,{children:b})]}));q.displayName=f.q7.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=f.wv.displayName},48536:(a,b,c)=>{"use strict";c.d(b,{Hc:()=>i,oc:()=>h,ws:()=>g});var d=c(75039),e=c(50526),f=c(25054);function g(a,b){let c=new d.jsPDF({orientation:"portrait",unit:"pt",format:"a4"});c.setFont("helvetica","normal"),c.setFontSize(10);let e=c.internal.pageSize.getHeight(),f=c.internal.pageSize.getWidth(),g=f-80,h=40;if(b){c.setFontSize(16),c.setFont("helvetica","bold");let a=c.splitTextToSize(b,g);c.text(a,f/2,h,{align:"center"}),h+=16*a.length+20,c.setFontSize(10),c.setFont("helvetica","normal")}return c.splitTextToSize(a,g).forEach(a=>{h+12>e-40&&(c.addPage(),h=40),c.text(a,40,h),h+=12}),c.output("blob")}function h(a,b,c=!1){try{let d=b.replace(/\.pdf$/,"").replace(/_/g," "),e=g(a,d);if(c)return e;let f=URL.createObjectURL(e),h=document.createElement("a");h.href=f,h.download=b,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(f)}catch(a){console.error("Error generating text-based PDF:",a),alert("Failed to generate PDF. Your browser might not be fully supported or there was an unexpected error.")}}async function i(a){let{scoreOutput:b,fileName:d,agentNameFromForm:g}=a.details,{product:h,timestamp:i}=a;if(!b||"number"!=typeof b.overallScore)throw Error("Cannot generate PDF report: The scoring data is incomplete or missing.");let{jsPDF:j}=await Promise.resolve().then(c.bind(c,75039)),{default:k}=await c.e(7439).then(c.bind(c,57439)),l=new j({orientation:"portrait",unit:"pt",format:"a4"}),m=l.internal.pageSize.getHeight(),n=l.internal.pageSize.getWidth(),o=n-80,p=40,q=(a=20)=>{p+a>m-40&&(l.addPage(),p=40)};l.setFont("helvetica","bold"),l.setFontSize(18),l.text("Call Scoring Report",n/2,p,{align:"center"}),p+=30,l.setFont("helvetica","normal"),l.setFontSize(10);let r=[`File Name: ${d}`,`Agent Name: ${g||"N/A"}`,`Product Focus: ${h||"General"}`],s=[`Date Scored: ${(0,e.GP)((0,f.H)(i),"PP p")}`,`Overall Score: ${b.overallScore.toFixed(1)}/5 (${b.callCategorisation})`,`Conversion Readiness: ${b.conversionReadiness||"N/A"}`,`Suggested Disposition: ${b.suggestedDisposition||"N/A"}`];l.text(r,40,p),l.text(s,n-40,p,{align:"right"}),p+=12*s.length+15,l.setDrawColor(200),l.line(40,p,n-40,p),p+=20;let t=(a,b,c={})=>{q(30),l.setFont("helvetica",c.fontStyle||"bold"),l.setFontSize(12),c.titleColor&&l.setTextColor(c.titleColor[0],c.titleColor[1],c.titleColor[2]),l.text(a,40,p),p+=18,l.setTextColor(0,0,0),l.setFont("helvetica","normal"),l.setFontSize(10);let d=c.isList&&Array.isArray(b)?b.map(a=>`- ${a}`).join("\n"):Array.isArray(b)?b.join("\n"):b;l.splitTextToSize(d,o).forEach(a=>{q(12),l.text(a,40+5*!!c.isList,p),p+=12}),p+=15};return t("Summary",b.summary),b.strengths?.length>0&&t("Key Strengths",b.strengths,{isList:!0}),b.areasForImprovement?.length>0&&t("Areas for Improvement",b.areasForImprovement,{isList:!0}),b.redFlags&&b.redFlags.length>0&&t("Critical Red Flags",b.redFlags,{isList:!0,titleColor:[220,53,69]}),q(40),l.setFont("helvetica","bold"),l.setFontSize(12),l.text("Detailed Metric Scores",40,p),p+=5,b.metricScores&&b.metricScores.length>0&&(k(l,{head:[["Metric","Score","Feedback"]],body:b.metricScores.map(a=>[a.metric,`${a.score?.toFixed(1)||"N/A"}/5`,a.feedback||"N/A"]),startY:p,headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold"},columnStyles:{0:{cellWidth:120},1:{cellWidth:50,halign:"center"},2:{cellWidth:"auto"}},didDrawPage:a=>{p=a.cursor?.y||p}}),p=l.lastAutoTable.finalY+20),b.improvementSituations&&b.improvementSituations.length>0&&(q(30),l.setFont("helvetica","bold"),l.setFontSize(12),l.text("Situations for Improvement",40,p),p+=18,b.improvementSituations.forEach((a,b)=>{q(60),l.setFontSize(10),l.setFont("helvetica","bold"),l.text(`Situation ${b+1}: ${a.context}`,40,p),p+=12,l.setFont("helvetica","italic"),l.setTextColor(150,150,150),a.timeInCall&&(l.text(`Time in call: ${a.timeInCall}`,40,p),p+=12),l.setTextColor(0,0,0);let c=(a,b)=>{l.splitTextToSize(`${a}: ${b}`,o-10).forEach(a=>{q(12),l.text(a,50,p),p+=12})};l.setFont("helvetica","normal"),a.userDialogue&&c("User Said",`"${a.userDialogue}"`),c("Agent's Response",`"${a.agentResponse}"`),c("Suggested Response",`"${a.suggestedResponse}"`),p+=10})),t("Original Call Transcript",b.transcript),l.output("blob")}},50115:(a,b,c)=>{Promise.resolve().then(c.bind(c,59912))},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},56801:a=>{"use strict";a.exports=require("import-in-the-middle")},57075:a=>{"use strict";a.exports=require("node:stream")},57265:a=>{"use strict";a.exports=require("child_process")},57975:a=>{"use strict";a.exports=require("node:util")},59912:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/(main)/create-training-deck/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/(main)/create-training-deck/page.tsx","default")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64780:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(main)",{children:["create-training-deck",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,59912)),"/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/(main)/create-training-deck/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,64261)),"/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/Users/Anchit.Tandon/Desktop/AI HUSTLE - APPS/AI-Telesuite-FireBase/src/app/(main)/create-training-deck/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(main)/create-training-deck/page",pathname:"/create-training-deck",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(main)/create-training-deck/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},68254:(a,b,c)=>{"use strict";c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},73024:a=>{"use strict";a.exports=require("node:fs")},73136:a=>{"use strict";a.exports=require("node:url")},73496:a=>{"use strict";a.exports=require("http2")},73566:a=>{"use strict";a.exports=require("worker_threads")},74075:a=>{"use strict";a.exports=require("zlib")},74998:a=>{"use strict";a.exports=require("perf_hooks")},76760:a=>{"use strict";a.exports=require("node:path")},77030:a=>{"use strict";a.exports=require("node:net")},77598:a=>{"use strict";a.exports=require("node:crypto")},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79748:a=>{"use strict";a.exports=require("fs/promises")},80665:(a,b,c)=>{"use strict";c.d(b,{F:()=>h});var d=c(21124),e=c(38301),f=c(84550),g=c(44943);let h=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.bL,{ref:e,className:(0,g.cn)("relative overflow-hidden",a),...c,children:[(0,d.jsx)(f.LM,{className:"h-full w-full rounded-[inherit]",children:b}),(0,d.jsx)(i,{}),(0,d.jsx)(f.OK,{})]}));h.displayName=f.bL.displayName;let i=e.forwardRef(({className:a,orientation:b="vertical",...c},e)=>(0,d.jsx)(f.VM,{ref:e,orientation:b,className:(0,g.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,d.jsx)(f.lr,{className:"relative flex-1 rounded-full bg-border"})}));i.displayName=f.VM.displayName},81630:a=>{"use strict";a.exports=require("http")},84297:a=>{"use strict";a.exports=require("async_hooks")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},97137:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5873,1428,5917,308,7506,8017,4550,5438,62,7786,5039,5938,5477,2178,9533],()=>b(b.s=64780));module.exports=c})();