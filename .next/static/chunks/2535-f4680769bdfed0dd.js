"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2535],{6259:(e,t,o)=>{o.d(t,{SQ:()=>u,_2:()=>p,mB:()=>f,rI:()=>c,ty:()=>m});var a=o(95155),n=o(12115),r=o(47971),i=o(63263),l=o(72251),s=o(75797),d=o(64269);let c=r.bL,m=r.l9;r.YJ,r.ZL,r.Pb,r.z6,n.forwardRef((e,t)=>{let{className:o,inset:n,children:l,...s}=e;return(0,a.jsxs)(r.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",o),...s,children:[l,(0,a.jsx)(i.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,a.jsx)(r.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...n})}).displayName=r.G5.displayName;let u=n.forwardRef((e,t)=>{let{className:o,sideOffset:n=4,...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...i})})});u.displayName=r.UC.displayName;let p=n.forwardRef((e,t)=>{let{className:o,inset:n,...i}=e;return(0,a.jsx)(r.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",o),...i})});p.displayName=r.q7.displayName,n.forwardRef((e,t)=>{let{className:o,children:n,checked:i,...s}=e;return(0,a.jsxs)(r.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),checked:i,...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),n]})}).displayName=r.H_.displayName,n.forwardRef((e,t)=>{let{className:o,children:n,...i}=e;return(0,a.jsxs)(r.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(s.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=r.hN.displayName,n.forwardRef((e,t)=>{let{className:o,inset:n,...i}=e;return(0,a.jsx)(r.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",o),...i})}).displayName=r.JU.displayName;let f=n.forwardRef((e,t)=>{let{className:o,...n}=e;return(0,a.jsx)(r.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",o),...n})});f.displayName=r.wv.displayName},80158:(e,t,o)=>{function a(e,t){if(!t||!t.length)return;let o=Object.keys(t[0]),a=new Blob([o.join(",")+"\n"+t.map(e=>o.map(t=>{let o=null===e[t]||void 0===e[t]?"":e[t];return(o=o instanceof Date?o.toLocaleString():o.toString().replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(o='"'.concat(o,'"')),o}).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");if(void 0!==n.download){let t=URL.createObjectURL(a);n.setAttribute("href",t),n.setAttribute("download",e),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}}function n(e,t){let o=new Blob([t],{type:e.endsWith(".doc")?"application/msword":"text/plain;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let t=URL.createObjectURL(o);a.setAttribute("href",t),a.setAttribute("download",e),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}}async function r(e,t){if(!e)return void console.error("No audio reference provided, cannot download.");let o=null;if(e.startsWith("data:")){if(!(o=function(e){if(!e||!e.includes(","))return null;try{let t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),n=new Uint8Array(a);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return new Blob([a],{type:o})}catch(e){return console.error("Error converting data URI to Blob:",e),null}}(e)))return void console.error("Failed to convert Data URI to Blob for download.")}else try{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch audio asset (".concat(t.status,")"));o=await t.blob()}catch(e){console.error("Unable to download remote audio asset:",e);return}let a=document.createElement("a");if(void 0!==a.download&&o){let e=URL.createObjectURL(o);a.setAttribute("href",e),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}}function i(e,t,o){let a=function(e,t,o){let a="",n=e.map((e,o)=>{let a=e.length;return t.forEach(e=>{let t=String(null===e[o]||void 0===e[o]?"":e[o]);t.length>a&&(a=t.length)}),a}),r=e.map((e,t)=>e.padEnd(n[t])).join(" | ");return a+=r+"\n"+e.map((e,t)=>"-".repeat(n[t])).join("-+-")+"\n",t.forEach(e=>{let t=e.map((e,t)=>String(null==e?"":e).padEnd(n[t])).join(" | ");a+=t+"\n"}),a}(t,o);n(e.endsWith(".doc")?e:"".concat(e,".doc"),a)}async function l(e,t,a){let{jsPDF:n}=await Promise.all([o.e(3930),o.e(5033),o.e(6241)]).then(o.bind(o,55172)),{default:r}=await o.e(6941).then(o.bind(o,36941)),i=new n({orientation:"landscape"});r(i,{head:[t],body:a,styles:{fontSize:8},headStyles:{fillColor:[41,128,185]},margin:{top:20},didDrawPage:function(e){i.setFontSize(16),i.text("Exported Table Data",e.settings.margin.left,15)}}),i.save(e.endsWith(".pdf")?e:"".concat(e,".pdf"))}o.d(t,{U3:()=>n,e3:()=>l,mf:()=>i,vG:()=>r,yR:()=>a})},88906:(e,t,o)=>{o.d(t,{Hc:()=>s,oc:()=>l,ws:()=>i});var a=o(55172),n=o(5282),r=o(19056);function i(e,t){let o=new a.jsPDF({orientation:"portrait",unit:"pt",format:"a4"});o.setFont("helvetica","normal"),o.setFontSize(10);let n=o.internal.pageSize.getHeight(),r=o.internal.pageSize.getWidth(),i=r-80,l=40;if(t){o.setFontSize(16),o.setFont("helvetica","bold");let e=o.splitTextToSize(t,i);o.text(e,r/2,l,{align:"center"}),l+=16*e.length+20,o.setFontSize(10),o.setFont("helvetica","normal")}return o.splitTextToSize(e,i).forEach(e=>{l+12>n-40&&(o.addPage(),l=40),o.text(e,40,l),l+=12}),o.output("blob")}function l(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let a=t.replace(/\.pdf$/,"").replace(/_/g," "),n=i(e,a);if(o)return n;let r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)}catch(e){console.error("Error generating text-based PDF:",e),alert("Failed to generate PDF. Your browser might not be fully supported or there was an unexpected error.")}}async function s(e){var t,a;let{scoreOutput:i,fileName:l,agentNameFromForm:s}=e.details,{product:d,timestamp:c}=e;if(!i||"number"!=typeof i.overallScore)throw Error("Cannot generate PDF report: The scoring data is incomplete or missing.");let{jsPDF:m}=await Promise.resolve().then(o.bind(o,55172)),{default:u}=await o.e(6941).then(o.bind(o,36941)),p=new m({orientation:"portrait",unit:"pt",format:"a4"}),f=p.internal.pageSize.getHeight(),h=p.internal.pageSize.getWidth(),g=h-80,b=40,v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;b+e>f-40&&(p.addPage(),b=40)};p.setFont("helvetica","bold"),p.setFontSize(18),p.text("Call Scoring Report",h/2,b,{align:"center"}),b+=30,p.setFont("helvetica","normal"),p.setFontSize(10);let y=["Date Scored: ".concat((0,n.GP)((0,r.H)(c),"PP p")),"Overall Score: ".concat(i.overallScore.toFixed(1),"/5 (").concat(i.callCategorisation,")"),"Conversion Readiness: ".concat(i.conversionReadiness||"N/A"),"Suggested Disposition: ".concat(i.suggestedDisposition||"N/A")];p.text(["File Name: ".concat(l),"Agent Name: ".concat(s||"N/A"),"Product Focus: ".concat(d||"General")],40,b),p.text(y,h-40,b,{align:"right"}),b+=12*y.length+15,p.setDrawColor(200),p.line(40,b,h-40,b),b+=20;let x=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(30),p.setFont("helvetica",o.fontStyle||"bold"),p.setFontSize(12),o.titleColor&&p.setTextColor(o.titleColor[0],o.titleColor[1],o.titleColor[2]),p.text(e,40,b),b+=18,p.setTextColor(0,0,0),p.setFont("helvetica","normal"),p.setFontSize(10);let a=o.isList&&Array.isArray(t)?t.map(e=>"- ".concat(e)).join("\n"):Array.isArray(t)?t.join("\n"):t;p.splitTextToSize(a,g).forEach(e=>{v(12),p.text(e,40+5*!!o.isList,b),b+=12}),b+=15};return x("Summary",i.summary),(null==(t=i.strengths)?void 0:t.length)>0&&x("Key Strengths",i.strengths,{isList:!0}),(null==(a=i.areasForImprovement)?void 0:a.length)>0&&x("Areas for Improvement",i.areasForImprovement,{isList:!0}),i.redFlags&&i.redFlags.length>0&&x("Critical Red Flags",i.redFlags,{isList:!0,titleColor:[220,53,69]}),v(40),p.setFont("helvetica","bold"),p.setFontSize(12),p.text("Detailed Metric Scores",40,b),b+=5,i.metricScores&&i.metricScores.length>0&&(u(p,{head:[["Metric","Score","Feedback"]],body:i.metricScores.map(e=>{var t;return[e.metric,"".concat((null==(t=e.score)?void 0:t.toFixed(1))||"N/A","/5"),e.feedback||"N/A"]}),startY:b,headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold"},columnStyles:{0:{cellWidth:120},1:{cellWidth:50,halign:"center"},2:{cellWidth:"auto"}},didDrawPage:e=>{var t;b=(null==(t=e.cursor)?void 0:t.y)||b}}),b=p.lastAutoTable.finalY+20),i.improvementSituations&&i.improvementSituations.length>0&&(v(30),p.setFont("helvetica","bold"),p.setFontSize(12),p.text("Situations for Improvement",40,b),b+=18,i.improvementSituations.forEach((e,t)=>{v(60),p.setFontSize(10),p.setFont("helvetica","bold"),p.text("Situation ".concat(t+1,": ").concat(e.context),40,b),b+=12,p.setFont("helvetica","italic"),p.setTextColor(150,150,150),e.timeInCall&&(p.text("Time in call: ".concat(e.timeInCall),40,b),b+=12),p.setTextColor(0,0,0);let o=(e,t)=>{p.splitTextToSize("".concat(e,": ").concat(t),g-10).forEach(e=>{v(12),p.text(e,50,b),b+=12})};p.setFont("helvetica","normal"),e.userDialogue&&o("User Said",'"'.concat(e.userDialogue,'"')),o("Agent's Response",'"'.concat(e.agentResponse,'"')),o("Suggested Response",'"'.concat(e.suggestedResponse,'"')),b+=10})),x("Original Call Transcript",i.transcript),p.output("blob")}}}]);