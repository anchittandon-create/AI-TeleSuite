(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{6943:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var r=a(83101),i=a(64269);let o=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)(o({variant:a}),t),...r})}},13496:(e,t,a)=>{"use strict";a.d(t,{$m:()=>d,As:()=>c,nD:()=>l,ub:()=>u});var s=a(95155),r=a(12115),i=a(16083),o=a(59007),n=a(64269);let l=i.bL,c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.q7,{ref:t,className:(0,n.cn)("border-b",a),...r})});c.displayName="AccordionItem";let d=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsx)(i.Y9,{className:"flex",children:(0,s.jsxs)(i.l9,{ref:t,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...l,children:[r,(0,s.jsx)(o.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.l9.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsx)(i.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...o,children:(0,s.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",a),children:r})})});u.displayName=i.UC.displayName},13630:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},15066:(e,t,a)=>{Promise.resolve().then(a.bind(a,62817))},15894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let r=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=[],l={toasts:[]};function c(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),n.forEach(e=>{e(l)})}function d(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(l);return s.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},17037:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var s=a(95155),r=a(12115),i=a(59034),o=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(i.bL,{ref:t,className:(0,o.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(l,{}),(0,s.jsx)(i.OK,{})]})});n.displayName=i.bL.displayName;let l=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...n}=e;return(0,s.jsx)(i.VM,{ref:t,orientation:r,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=i.VM.displayName},22390:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},30926:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return r.findSourceMapURL}});let s=a(41209),r=a(85153),i=a(77197)},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var s=a(95155),r=a(12115),i=a(64269);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});o.displayName="Textarea"},31524:(e,t,a)=>{"use strict";a.d(t,{G:()=>u,ProductProvider:()=>d});var s=a(95155),r=a(12115),i=a(67050),o=a(15894);let n=(0,r.createContext)(void 0),l=[{name:"ET",displayName:"ET",description:"Economic Times - Premium business news and analysis.",brandName:"The Economic Times",brandUrl:"https://economictimes.indiatimes.com/",customerCohorts:["Payment Dropoff","Paywall Dropoff","Plan Page Dropoff","Expired Users","Business Owners","Financial Analysts","Active Investors","Corporate Executives"],salesPlans:["1-Year","2-Years","3-Years"],specialPlanConfigurations:["1, 3 and 5 year plans","1, 3 and 7 year plans","1, 2 and 3 year plans"]},{name:"TOI",displayName:"TOI",description:"Times of India - In-depth news and journalism.",brandName:"The Times of India",brandUrl:"https://timesofindia.indiatimes.com/",customerCohorts:["Payment Dropoff","Paywall Dropoff","Expired Users","New Prospect Outreach","Young Professionals","Students"],salesPlans:["Monthly","Quarterly","1-Year"],specialPlanConfigurations:["1, 2 and 3 year plans"]},{name:"General",displayName:"General",description:"For general purpose use across features.",brandName:"",brandUrl:"",customerCohorts:[],salesPlans:[],specialPlanConfigurations:["1, 2 and 3 year plans"]}],c=l.map(e=>e.name),d=e=>{let{children:t}=e,{toast:a}=(0,o.dj)(),[d,u]=(0,i.M)("aiTeleSuiteAvailableProducts_v3",l);(0,r.useEffect)(()=>{let e=new Map(d.map(e=>[e.name,e])),t=!1;for(let s of l)if(e.has(s.name)){var a;let r=e.get(s.name);if(r.description||(r.description=s.description,t=!0),r.displayName||(r.displayName=s.displayName,t=!0),"customerCohorts"in r||(r.customerCohorts=s.customerCohorts,t=!0),"salesPlans"in r||(r.salesPlans=s.salesPlans,t=!0),"specialPlanConfigurations"in r&&Array.isArray(r.specialPlanConfigurations)){if(null==(a=s.specialPlanConfigurations)?void 0:a.length){let e=s.specialPlanConfigurations.filter(e=>!r.specialPlanConfigurations.includes(e));e.length>0&&(r.specialPlanConfigurations=[...r.specialPlanConfigurations,...e],t=!0)}}else r.specialPlanConfigurations=[...s.specialPlanConfigurations||[]],t=!0}else e.set(s.name,s),t=!0;t&&u(Array.from(e.values()))},[d,u]);let p=(0,r.useCallback)(e=>{if(!e.displayName||!e.displayName.trim())return a({variant:"destructive",title:"Invalid Name",description:"Display name cannot be empty."}),!1;let t=e.displayName.trim().toLowerCase().replace(/\s+/g,"-");return d.some(e=>e.name.toLowerCase()===t)?(a({variant:"destructive",title:"Product Exists",description:"A product with a similar name already exists, please choose a different name."}),!1):(u([...d,{...e,name:t}]),a({title:"Product Added",description:'"'.concat(e.displayName,'" has been added.')}),!0)},[d,u,a]),m=(0,r.useCallback)((e,t)=>t.displayName.trim()?(u(a=>a.map(a=>a.name===e?{...a,...t}:a)),a({title:"Product Updated",description:'"'.concat(t.displayName,'" has been updated.')}),!0):(a({variant:"destructive",title:"Invalid Name",description:"Display name cannot be empty."}),!1),[u,a]),f=(0,r.useCallback)(e=>c.includes(e)?(a({variant:"destructive",title:"Action Forbidden",description:"Default products cannot be deleted."}),!1):(u(t=>t.filter(t=>t.name!==e)),a({title:"Product Deleted",description:"A product has been removed."}),!0),[u,a]),h=(0,r.useCallback)(e=>d.find(t=>t.name===e),[d]),g=(0,r.useMemo)(()=>{let e=d.find(e=>"General"===e.name),t=d.filter(e=>"General"!==e.name).sort((e,t)=>e.displayName.localeCompare(t.displayName));return e?[...t,e]:t},[d]);return(0,s.jsx)(n.Provider,{value:{availableProducts:g,addProduct:p,editProduct:m,deleteProduct:f,getProductByName:h},children:t})},u=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useProductContext must be used within a ProductProvider");return e}},35646:(e,t,a)=>{"use strict";a.d(t,{UC:()=>D,VY:()=>F,ZD:()=>M,ZL:()=>O,bL:()=>P,hE:()=>L,hJ:()=>R,l9:()=>S,rc:()=>U});var s=a(12115),r=a(3468),i=a(94446),o=a(89511),n=a(92556),l=a(32467),c=a(95155),d="AlertDialog",[u,p]=(0,r.A)(d,[o.Hs]),m=(0,o.Hs)(),f=e=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,c.jsx)(o.bL,{...s,...a,modal:!0})};f.displayName=d;var h=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,r=m(a);return(0,c.jsx)(o.l9,{...r,...s,ref:t})});h.displayName="AlertDialogTrigger";var g=e=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,c.jsx)(o.ZL,{...s,...a})};g.displayName="AlertDialogPortal";var b=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,r=m(a);return(0,c.jsx)(o.hJ,{...r,...s,ref:t})});b.displayName="AlertDialogOverlay";var x="AlertDialogContent",[y,v]=u(x),j=(0,l.Dc)("AlertDialogContent"),N=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:r,...l}=e,d=m(a),u=s.useRef(null),p=(0,i.s)(t,u),f=s.useRef(null);return(0,c.jsx)(o.G$,{contentName:x,titleName:w,docsSlug:"alert-dialog",children:(0,c.jsx)(y,{scope:a,cancelRef:f,children:(0,c.jsxs)(o.UC,{role:"alertdialog",...d,...l,ref:p,onOpenAutoFocus:(0,n.mK)(l.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=f.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,c.jsx)(j,{children:r}),(0,c.jsx)(E,{contentRef:u})]})})})});N.displayName=x;var w="AlertDialogTitle",A=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,r=m(a);return(0,c.jsx)(o.hE,{...r,...s,ref:t})});A.displayName=w;var C="AlertDialogDescription",T=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,r=m(a);return(0,c.jsx)(o.VY,{...r,...s,ref:t})});T.displayName=C;var k=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,r=m(a);return(0,c.jsx)(o.bm,{...r,...s,ref:t})});k.displayName="AlertDialogAction";var Y="AlertDialogCancel",I=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:r}=v(Y,a),n=m(a),l=(0,i.s)(t,r);return(0,c.jsx)(o.bm,{...n,...s,ref:l})});I.displayName=Y;var E=e=>{let{contentRef:t}=e,a="`".concat(x,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(x,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(x,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return s.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},P=f,S=h,O=g,R=b,D=N,U=k,M=I,L=A,F=T},36950:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var s=a(95155),r=a(12410),i=a(64269);function o(e){let{text:t,className:a,...r}=e;return(0,s.jsx)("h1",{className:(0,i.cn)("text-lg font-semibold md:text-xl text-foreground",a),...r,children:t})}var n=a(44385),l=a(44622);function c(e){let{title:t}=e,a=(0,n.a)();return(0,s.jsxs)("header",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background/80 backdrop-blur-sm px-4 md:px-6",children:[a&&(0,s.jsxs)(r.x2,{variant:"ghost",size:"icon",className:"md:hidden -ml-2",children:[(0,s.jsx)(l.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]}),(0,s.jsx)(o,{text:t,className:"flex-1"})]})}},44575:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>m,L3:()=>f,c7:()=>p,lG:()=>l,rr:()=>h});var s=a(95155),r=a(12115),i=a(89511),o=a(26615),n=a(64269);let l=i.bL;i.l9;let c=i.ZL;i.bm;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});d.displayName=i.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(i.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=i.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=i.VY.displayName},59338:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},62817:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var s=a(95155),r=a(12115),i=a(31524),o=a(36950),n=a(3998),l=a(86948),c=a(87270),d=a(51834),u=a(98053),p=a(14294);let m=(0,p.A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var f=a(22390),h=a(88964),g=a(13630),b=a(17037),x=a(30926);let y=(0,x.createServerReference)("40b28c86c9ea78a7a766f9bb474fa3b6234c116885",x.callServer,void 0,x.findSourceMapURL,"generateProductDescription");var v=a(15894),j=a(20243),N=a(11647),w=a(65142),A=a(76444),C=a(31120),T=a(13496),k=a(98734),Y=a(44193);let I=["Monthly","Quarterly","Half-Yearly","1-Year","2-Years","3-Years","Custom"],E=["Universal","Payment Dropoff","Paywall Dropoff","Plan Page Dropoff","Assisted Buying","Free Trial Nearing Expiry","Free Trial Expired","Based on Propensity Score","Expired Users","Post-Trial Follow-up","Loyalty & Retention","Payment Recovery & Renewals","New Prospect Outreach","Premium Upsell Candidates","Business Owners","Financial Analysts","Active Investors","Corporate Executives","Young Professionals","Students"],P=["1, 3 and 5 year plans","1, 3 and 7 year plans","1, 2 and 3 year plans"];k.Ik({audioDataUri:k.Yj().optional().describe("An audio file, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'."),audioUrl:k.Yj().url().optional().describe("A public URL to an audio file. Use this for larger files to avoid passing large data URIs.")}).superRefine((e,t)=>{e.audioDataUri||e.audioUrl||t.addIssue({code:Y.eq.custom,message:"Either audioDataUri or audioUrl must be provided.",path:["audioDataUri"]})}),k.Ik({callMeta:k.Ik({sampleRateHz:k.ai().nullable(),durationSeconds:k.ai().nullable()}),segments:k.YO(k.Ik({startSeconds:k.ai(),endSeconds:k.ai(),speaker:k.k5(["Agent","User","System"]),speakerProfile:k.Yj(),text:k.Yj()})),summary:k.Ik({overview:k.Yj(),keyPoints:k.YO(k.Yj()),actions:k.YO(k.Yj())})}),k.Ik({product:k.Yj().min(1,"Product is required."),agentName:k.Yj().optional(),audioDataUri:k.Yj().optional().describe("The full audio of the call as a data URI. Used for tonality analysis."),audioUrl:k.Yj().url().optional().describe("A public URL to an audio file. Use this for larger files to avoid passing large data URIs."),transcriptOverride:k.Yj().optional().describe("A full, pre-existing transcript of the call. If not provided, a transcript will be generated from audioDataUri."),productContext:k.Yj().optional().describe("A string containing concatenated knowledge base and product catalog information."),brandUrl:k.Yj().url().optional().describe("The official URL of the product brand for fallback knowledge retrieval.")}).superRefine((e,t)=>{e.audioDataUri||e.transcriptOverride||e.audioUrl||t.addIssue({code:Y.eq.custom,message:"Either audioDataUri, audioUrl, or transcriptOverride must be provided.",path:["audioDataUri"]})}),k.Ik({transcript:k.Yj(),transcriptAccuracy:k.Yj(),overallScore:k.ai().describe("The single, overall score for the call, calculated as the average of all individual metric scores. Value is from 1 to 5."),callCategorisation:k.k5(["Excellent","Good","Average","Needs Improvement","Poor","Error"]),conversionReadiness:k.k5(["High","Medium","Low"]).describe("The AI's assessment of the user's likelihood to convert at the end of the call."),suggestedDisposition:k.Yj().describe("The suggested final call disposition for this call (e.g., 'Sale', 'Follow-up', 'Lead Nurturing', 'DNC - Do Not Call', 'Not Interested')."),summary:k.Yj().describe("A concise paragraph summarizing the entire call's key events, flow, and outcome."),strengths:k.YO(k.Yj()).describe("A list of 2-3 key strengths observed during the call."),areasForImprovement:k.YO(k.Yj()).describe("A list of 2-3 specific, actionable areas for improvement for the agent."),redFlags:k.YO(k.Yj()).describe("A list of any critical issues observed, such as compliance breaches, major mis-selling of product features, or extremely poor customer service. If none, this should be an empty array."),metricScores:k.YO(k.Ik({metric:k.Yj().describe("The specific metric being evaluated (e.g., 'Call Opening', 'Probing Depth', 'Price Objection Response')."),score:k.ai().min(1).max(5).describe("The score for this metric, from 1 to 5."),feedback:k.Yj().describe("Detailed, specific, and actionable feedback for this metric.")})).describe("A comprehensive list of all evaluated metrics with their scores and feedback."),improvementSituations:k.YO(k.bz()).optional().describe("This field is defined dynamically in the flow to avoid circular dependencies. It contains specific situations for improvement."),timestamp:k.Yj().optional()});let S=k.Ik({metricName:k.Yj().describe("Name of the Key Performance Indicator (KPI) or key metric identified (e.g., 'Overall Conversion Rate', 'Average Revenue Per Call', 'Lead Follow-up Rate', 'Connectivity %')."),value:k.Yj().describe("The calculated or inferred value of the metric (e.g., '15.2%', 'â‚¹350', '75%', '60%'). State if value cannot be determined from provided context. For calculated KPIs, briefly mention the assumed formula or source columns if not obvious."),trendOrComparison:k.Yj().optional().describe("Brief note on trend (e.g., 'Up 5% from last month', 'Stable') or comparison ('Highest among agents') if derivable from user's description."),insight:k.Yj().optional().describe("A brief insight related to this metric. (e.g. 'Indicates strong product-market fit for this cohort.')")}),O=k.Ik({type:k.k5(["Line Chart","Bar Chart","Pie Chart","Table","Heatmap","Scatter Plot"]).describe("Suggested type of visualization."),title:k.Yj().describe("Title for the suggested chart/table (e.g., 'Monthly Revenue Trend', 'Agent Performance Comparison')."),description:k.Yj().describe("Brief description of what this chart/table would show and what data it would use from the user's described files (e.g., 'Line chart showing total revenue per month from Oct-May, using 'Revenue' column from ET MIS sheets.' or 'Table comparing Agent Name, Calls Made, Conversion %').")});k.Ik({fileDetails:k.YO(k.Ik({fileName:k.Yj().describe("The name of one of the user's files."),fileType:k.Yj().describe("The MIME type of the file (e.g., 'text/csv', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet').")})).min(1).describe("An array of objects, each describing a file the user intends to analyze. The AI uses these names and types as context alongside the user's detailed prompt."),userAnalysisPrompt:k.Yj().min(50).describe("The user's detailed prompt (min 50 characters) describing their files (e.g., 'Monthly MIS in Excel with sheets for Oct-May containing columns: Agent Name, Calls Made, Revenue...', 'CDR Dump as ZIP of CSVs...'), their likely data structure (column headers, date formats, numeric vs categorical fields, AND CRITICALLY: any decoding rules for coded fields e.g., 'NR' = Not Reachable, 'CALLB' = Call Back, 'INT' = Interested), specific file mappings ('My file 'sales_oct.xlsx' is the 'Monthly Revenue Tracker for Oct'), and specific analytical goals or areas of focus for THIS run (e.g., 'Focus the trend analysis specifically on Q4 & Q1, identify top agents...'). This supplements the main analysis instructions and is CRITICAL for the AI to understand the data it cannot directly read. Describe any known messiness in the data if you want the AI to address hypothetical cleaning steps.").max(1e4),sampledFileContent:k.Yj().optional().describe("A small text sample (e.g., first 10,000 characters) ONLY if one of the primary files is CSV/TXT. The AI uses this for more concrete initial observations if available. This field is undefined for Excel, DOCX, PDF etc.")}),k.Ik({reportTitle:k.Yj().describe("A comprehensive title for this specific data analysis report, reflecting the user's file context and analysis goals (e.g., 'Telecalling Performance & Revenue Attribution Analysis (Oct-May)', 'Subscription Renewal Rate Analysis')."),executiveSummary:k.Yj().min(1).describe("A concise overview (2-3 bullet points or a short paragraph) of the most critical findings and actionable insights. This should explain what the data *means* at a high level."),keyMetrics:k.YO(S).min(1).describe("An array of at least 1-3 key metrics or KPIs derived from the analysis (e.g., Conversion Rate, Lead Follow-up Rate, Connection Rate, Avg Revenue/Call). These should be specific and, where possible, quantified based on the user's description of their data. If revenue is missing, state how performance is being inferred (e.g., from intent outcome distribution)."),detailedAnalysis:k.Ik({dataReconstructionAndNormalizationSummary:k.Yj().optional().describe("A brief summary of how the AI *hypothetically* cleaned, reconstructed, or normalized the data tables based on the user's description of the data and its potential messiness. Explicitly mention how the user's detailed prompt (e.g., descriptions of column misalignments, merged rows, or specific null value representations) guided this simulated cleanup process."),smartTableRecognitionSummary:k.Yj().optional().describe("Brief summary of how the AI *inferred* the purpose of different described data tables/sheets (e.g., CDR, Daily MIS, Source Dump) based on the column names, sheet names, and context provided by the user in their detailed prompt."),timeSeriesTrends:k.Yj().optional().describe("Analysis of time-based trends (e.g., monthly/quarterly growth, dips, seasonality in revenue, calls, conversions, connection rates). Describe what patterns are observed and potential reasons based on described data context. Highlight any significant monthly changes."),comparativePerformance:k.Yj().optional().describe("Comparison of performance across different categories such as agents or cohorts. Identify top/low performers or significant variances. For agents, discuss insights like 'Agent A converted fewer leads despite high talktime'. For cohorts, identify which ones are being ignored or over-performing, and their ROI if inferable."),useCaseSpecificInsights:k.Yj().optional().describe("Insights specific to telecalling operations, campaign attribution, incentive effectiveness, or sales funnel leakages, as suggested by the user's prompt and data description. Examples: insights on lead connectivity, conversion rates at different funnel stage, agent productivity variations, cohort ROI, incentive impact, or reasons for low follow-up causing low conversions. If something seems off (e.g., very low call duration based on user's description), flag it as a red flag and suggest possible causes.")}).describe("Detailed breakdown of analytical findings, covering hypothetical data prep, table interpretations, agent-level insights, cohort trends, and other use-case specific points."),chartsOrTablesSuggestions:k.YO(O).optional().describe("Suggestions for 1-2 charts or tables that would best visualize the key findings."),recommendations:k.YO(k.Ik({area:k.Yj().describe("The area the recommendation pertains to (e.g., Agent Training, Cohort Strategy, Lead Management, Process Improvement, Incentive Adjustment)."),recommendation:k.Yj().describe("A specific, actionable recommendation based on the analysis (e.g., 'Train low-performing agents on X', 'Focus more on Payment Drop-offs cohort due to high ROI potential')."),justification:k.Yj().optional().describe("Briefly mention the analysis findings or data patterns (from user's description) that support this recommendation.")})).min(1).describe("At least 1-2 actionable recommendations or next steps derived from the analysis."),directInsightsFromSampleText:k.Yj().optional().describe("If a text sample (CSV/TXT) was provided: 2-3 specific insights, simple calculations (e.g. 'Average X from sample is Y'), or key observations derived *directly* from analyzing that sample content. E.g., 'The provided CSV sample shows an average call duration of X minutes based on a 'Duration' column.' If no sample, or sample is unusable, this field should state that or be omitted."),limitationsAndDisclaimer:k.Yj().describe("A clear disclaimer: This AI-generated analysis is based on the user's description of their data and any provided text samples. The AI has NOT directly processed or validated the content of complex binary files (Excel, DOCX, PDF, ZIP). The user is responsible for verifying all findings against their actual full datasets and business context. The accuracy and depth of this analysis are directly proportional to the detail provided in the user's input prompt.")}),k.Ik({product:k.Yj().min(1,"Product must be selected."),customerCohort:k.Yj().min(1,"Customer cohort must be selected."),specialPlanConfigurations:k.Yj().optional(),knowledgeBaseContext:k.Yj().describe('A structured string of knowledge base content. It contains sections like "--- PITCH STRUCTURE & FLOW CONTEXT ---" and "--- PRODUCT DETAILS & FACTS ---" which the AI must use for their designated purposes. It may also contain a "--- START OF USER-SELECTED KB CONTEXT ---" section which MUST be prioritized.'),optimizationContext:k.Yj().optional().describe("Insights from a combined call analysis to guide pitch optimization. Contains strengths to lean into and weaknesses to address."),salesPlan:k.Yj().optional(),offer:k.Yj().optional(),agentName:k.Yj().optional(),userName:k.Yj().optional(),brandName:k.Yj().optional(),brandUrl:k.Yj().url().optional()});let R=k.Ik({pitchTitle:k.Yj().describe("A compelling title for the sales pitch."),warmIntroduction:k.Yj().describe("A brief, friendly opening, introducing the agent (if name provided) and the product brand. This MUST be concise and derived *ONLY* from Knowledge Base cues if available (e.g., standard greeting), otherwise general professional greeting. Ensure this content is distinct from other sections."),personalizedHook:k.Yj().describe("A hook tailored to the user's cohort, explaining the reason for the call and possibly hinting at benefits or offers relevant to that cohort. This section MUST use specifics *ONLY* from the Knowledge Base if available for the cohort or product, otherwise a generic professional hook for the cohort. Ensure this content is distinct and does not repeat Warm Introduction or Product Explanation points."),productExplanation:k.Yj().min(10).describe("Clear explanation of the product, focusing on its core value proposition to the customer. This MUST be derived *ONLY* from the '--- PRODUCT DETAILS & FACTS ---' section of the Knowledge Base. Do not repeat information from the hook if it covered product basics. Ensure this content is distinct and does not repeat benefits detailed in 'keyBenefitsAndBundles'. If context is sparse, state what kind of info would be here and refer agent to KB/source file."),keyBenefitsAndBundles:k.Yj().min(10).describe("Highlight 2-4 key benefits and any bundled offers. This MUST be derived *ONLY* from the '--- PRODUCT DETAILS & FACTS ---' section of the Knowledge Base. Explain added value to the customer. Ensure these benefits are distinct and not just rephrasing the Product Explanation. If context is sparse, state what kind of info would be here and refer agent to KB/source file."),discountOrDealExplanation:k.Yj().describe("Explanation of any specific discount or deal. If no offer, mention plan availability. Use <INSERT_PRICE> placeholder. This MUST be derived *ONLY* from the '--- PRODUCT DETAILS & FACTS ---' section of the Knowledge Base. If context is sparse, state what kind of info would be here and refer agent to KB/source file."),objectionHandlingPreviews:k.Yj().describe("Proactively address 1-2 common objections with brief rebuttals. This MUST be based *ONLY* on information in the '--- PRODUCT DETAILS & FACTS ---' or '--- GENERAL SUPPLEMENTARY CONTEXT ---' sections of the Knowledge Base (e.g., 'Common Selling Themes'). If context is sparse, state what kind of info would be here and refer agent to KB/source file."),finalCallToAction:k.Yj().describe("A clear and direct call to action, prompting the customer to proceed or request more information. This MUST be specific and actionable, and feel like a natural conclusion to the preceding points."),fullPitchScript:k.Yj().min(50).describe("The complete sales pitch script, formatted as a DIALOGUE primarily from the AGENT's perspective (use 'Agent:' label, or the agent's name if provided). You may include very brief, implied customer interjections or listening cues (e.g., 'Customer: (Listening)', 'Customer: Mm-hmm', or the customer's name if provided) to make it flow naturally. This script MUST smoothly integrate all distinct components above without excessive repetition, creating a natural, flowing conversation. Target 450-600 words for the agent's parts. Use placeholders like {{AGENT_NAME}}, {{USER_NAME}}, {{PRODUCT_NAME}}, {{USER_COHORT}}, {{PLAN_NAME}}, {{OFFER_DETAILS}}, <INSERT_PRICE>."),estimatedDuration:k.Yj().describe("Estimated speaking duration of the agent's parts in the full pitch script (e.g., '3-5 minutes')."),notesForAgent:k.Yj().optional().describe("Optional brief notes or tips for the agent specific to this pitch, product, and cohort (e.g., 'Emphasize X benefit for this cohort'). Include a note here if the AI could not directly process an uploaded file's content and had to rely on metadata or any general KB.")});k.Ik({objection:k.Yj().describe("The customer objection."),product:k.Yj().min(1,"Product must be selected."),knowledgeBaseContext:k.Yj().describe("Concatenated relevant knowledge base content for the specified product. This is the sole source for rebuttal generation."),brandUrl:k.Yj().url().optional()}),k.Ik({rebuttal:k.Yj().describe("A contextual rebuttal to the customer objection. It should be well-structured, empathetic, and directly address the customer's concern. Prioritize using KB information. If KB is sparse for the specific objection, use general knowledge to structure a helpful response while still grounding it in the product context.")});let D=k.Ik({name:k.Yj().describe("Name of the knowledge base item (e.g., file name, text entry title, or 'User-Provided Prompt')."),textContent:k.Yj().optional().describe("Full text content if the item is a text entry from KB, a small directly uploaded text file, or the direct user prompt."),isTextEntry:k.zM().describe("Whether this item is a direct text entry from the KB or a direct user prompt."),fileType:k.Yj().optional().describe("MIME type of the file, if applicable (especially for direct uploads). Will be 'text/plain' for prompts.")});k.Ik({product:k.Yj().describe("The product (ET or TOI) the training material is for."),deckFormatHint:k.k5(["PDF","Word Doc","PPT","Brochure"]).describe("The intended output format (influences content structure suggestion)."),knowledgeBaseItems:k.YO(D).describe("An array of contextual items: selected KB items, items derived from direct file uploads, OR a single item representing a direct user prompt. For KB files or larger/binary direct uploads, only name/type is primary context unless textContent is provided. For text entries from KB or direct prompts, full textContent is available."),generateFromAllKb:k.zM().describe("If true, knowledgeBaseItems represents the entire KB relevant to the product (and direct uploads/prompts are ignored)."),sourceDescriptionForAi:k.Yj().optional().describe("A brief description of the source of the knowledgeBaseItems (e.g., 'selected KB items', 'entire KB for ET', 'directly uploaded files: report.docx, notes.txt', 'a direct user-provided prompt requesting ET Prime Sales Training'). This helps the AI understand the context source.")});let U=k.Ik({title:k.Yj().describe("The title of this section/slide/panel."),content:k.Yj().describe("The main content for this section, formatted with bullet points, paragraphs, or concise statements as appropriate for the target format. Keep content focused for each section. For brochures, content should be persuasive and benefit-oriented, including textual suggestions for visuals e.g., (Visual: Happy customer using product)."),notes:k.Yj().optional().describe("Optional speaker notes for slides, or internal notes/suggestions for brochure panels (e.g., 'Use vibrant background', 'Feature customer testimonial', 'Visual Suggestion Detail: ...').")});k.Ik({deckTitle:k.Yj().describe("The overall title for the training material (deck or brochure)."),sections:k.YO(U).min(3).describe("An array of at least 3 sections/slides/panels. For decks: intro, content, conclusion. For brochures: cover panel, internal panels, call-to-action panel.")}),k.Ik({action:k.k5(["START_CONVERSATION","PROCESS_USER_RESPONSE","END_CALL"]),product:k.Yj(),productDisplayName:k.Yj(),brandName:k.Yj().optional(),brandUrl:k.Yj().url().optional(),salesPlan:k.Yj().optional(),specialPlanConfigurations:k.Yj().optional(),offer:k.Yj().optional(),customerCohort:k.Yj(),agentName:k.Yj().optional(),userName:k.Yj().optional(),knowledgeBaseContext:k.Yj(),conversationHistory:k.YO(k.Ie()),currentPitchState:k.Ie().nullable(),currentUserInputText:k.Yj().optional(),inactivityCounter:k.ai().optional()}),k.Ik({conversationTurns:k.YO(k.Ie()),currentAiResponseText:k.Yj().optional(),generatedPitch:k.Ie().nullable(),nextExpectedAction:k.k5(["USER_RESPONSE","END_CALL_NO_SCORE","INTERACTION_ENDED"]),errorMessage:k.Yj().optional()}),k.Ik({product:k.Yj(),agentName:k.Yj().optional().describe("Name of the AI agent (for dialogue)."),userName:k.Yj().optional().describe("Name of the user/customer (for dialogue)."),userQuery:k.Yj().min(1,"User query text must be provided."),knowledgeBaseContext:k.Yj().min(10,"Knowledge base context is required and must be provided."),conversationHistory:k.YO(k.Ie()).optional(),brandUrl:k.Yj().url().optional()}),k.Ik({aiResponseText:k.Yj().optional(),escalationSuggested:k.zM().default(!1),sourcesUsed:k.YO(k.Yj()).optional(),errorMessage:k.Yj().optional()}),k.Ik({conversationHistory:k.YO(k.Ie()).optional().describe("The full history of the conversation, with 'AI' and 'User' speakers."),agentVoiceProfile:k.Yj().optional().describe("The voice profile ID from Google's catalog (e.g., 'en-IN-Wavenet-D')."),singleSpeakerText:k.Yj().optional().describe("If provided, generate audio for this single text string instead of the conversation history.")}),k.Ik({audioDataUri:k.Yj().describe("The Data URI of the generated WAV audio file for the full call."),errorMessage:k.Yj().optional()});let M=k.Ik({fileName:k.Yj(),scoreOutput:k.Ie()});k.Ik({callReports:k.YO(M).min(1,"At least one call report is required."),product:k.Yj().describe("The product focus for this batch of calls."),overallAnalysisGoal:k.Yj().optional().describe("Optional: A specific goal or focus for this combined analysis (e.g., 'Identify reasons for low conversion in this batch', 'Assess consistency in objection handling').")});let L=k.Ik({reportTitle:k.Yj().describe("Title for the combined analysis report (e.g., 'Combined Analysis for ET - Batch of 5 Calls')."),productFocus:k.Yj().describe("The product focus for this batch of calls."),numberOfCallsAnalyzed:k.ai().int().describe("Total number of calls included in this combined analysis."),averageOverallScore:k.ai().optional().describe("The average overall score calculated across all valid individual reports. Omit if not calculable."),overallBatchCategorization:k.Yj().optional().describe("A qualitative categorization for the entire batch (e.g., 'Generally Strong Performance with room for improvement in X', 'Mixed Results - Significant inconsistencies noted')."),batchExecutiveSummary:k.Yj().min(1).describe("A concise (2-4 sentences) high-level summary of the most critical findings and actionable insights from the entire batch of calls."),commonStrengthsObserved:k.YO(k.Yj()).describe("List 2-4 key strengths that were commonly observed across multiple calls in the batch."),commonAreasForImprovement:k.YO(k.Yj()).describe("List 2-4 common areas for improvement identified from the batch."),commonRedFlags:k.YO(k.Yj()).optional().describe("A list of critical flaws or 'red flags' that appeared more than once across the batch of calls (e.g. compliance issues, rude behavior)."),keyThemesAndTrends:k.YO(k.Ik({theme:k.Yj().describe("A key theme or trend observed (e.g., 'Price Sensitivity Dominant Objection', 'Customer Confusion on Feature X')."),description:k.Yj().describe("Brief description or examples illustrating this theme from the calls."),frequency:k.Yj().optional().describe("Qualitative frequency of this theme (e.g., 'Observed in most calls', 'Appeared in approximately half of the calls').")})).min(1).describe("At least 1-3 notable themes, trends, or patterns observed across the batch of calls."),metricPerformanceSummary:k.YO(k.Ik({metricName:k.Yj().describe("Name of a key performance metric (e.g., 'Opening & Rapport Building', 'Objection Handling Effectiveness')."),batchPerformanceAssessment:k.Yj().describe("A qualitative summary of how this metric was performed across the batch."),averageScore:k.ai().optional().describe("If calculable, the average score for this metric across the batch (1-5)."),specificObservations:k.Yj().optional().describe("Brief, specific observations or examples related to this metric from the batch.")})).describe("Summary of performance across 3-5 key metrics for the batch."),individualCallHighlights:k.YO(k.Ik({fileName:k.Yj(),overallScore:k.ai(),briefSummary:k.Yj().max(150).describe("A one or two-sentence summary highlighting the most notable aspect of this individual call.")})).optional().describe("Optional: Brief highlights from up to 3-5 notable individual calls that exemplify key findings.")});k.Ik({product:k.Yj(),cohortsToOptimize:k.YO(k.Yj()).min(1),analysisReport:L,knowledgeBaseContext:k.Yj()}),k.Ik({optimizedPitches:k.YO(k.Ik({cohort:k.Yj(),pitch:R}))});var F=a(26615);let B=(0,p.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var z=a(92033),_=a(59338),H=a(6943),V=a(44575);let K=(0,p.A)("BadgeInfo",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"16",y2:"12",key:"1y1yb1"}],["line",{x1:"12",x2:"12.01",y1:"8",y2:"8",key:"110wyk"}]]),G=e=>{let{label:t,values:a,predefinedValues:i,onValuesChange:o,showCustomInput:l=!0,customInputPlaceholder:c}=e,[d,u]=(0,r.useState)(""),p=()=>{let e=d.trim();e&&!a.includes(e)&&o([...a,e]),u("")};return(0,s.jsxs)("div",{className:"space-y-4",children:[a.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md bg-background min-h-[40px]",children:a.map(e=>(0,s.jsxs)(N.E,{variant:"secondary",className:"text-sm py-1 pl-3 pr-1",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>{o(a.filter(t=>t!==e))},className:"ml-2 rounded-full p-0.5 hover:bg-destructive/20 text-destructive",children:(0,s.jsx)(F.A,{size:14})})]},e))}),l&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.p,{value:d,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),p())},placeholder:c||"Type a new ".concat(t.toLowerCase()," and press Enter")}),(0,s.jsx)(n.$,{type:"button",onClick:p,variant:"outline",size:"sm",children:"Add"})]}),i.length>0&&(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Click to add/remove from predefined list:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:i.map(e=>(0,s.jsxs)(n.$,{type:"button",size:"xs",variant:a.includes(e)?"default":"outline",onClick:()=>(e=>{o(a.includes(e)?a.filter(t=>t!==e):[...a,e])})(e),className:"font-normal",children:[a.includes(e)?(0,s.jsx)(F.A,{className:"mr-1.5 h-3 w-3"}):(0,s.jsx)(B,{className:"mr-1.5 h-3 w-3"})," ",e]},e))})]})]})};function q(e){let{context:t,productData:a,updater:r,isGeneratingDesc:i,onGenerateDescription:o}=e,l=(e,t)=>{r(a=>({...a,[e]:t}))};return(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(A.J,{htmlFor:"".concat(t,"-product-display-name"),className:"text-right",children:"Display Name"}),(0,s.jsx)(w.p,{id:"".concat(t,"-product-display-name"),value:a.displayName,onChange:e=>r(t=>({...t,displayName:e.target.value})),className:"col-span-3",placeholder:"e.g., MagicBricks"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(A.J,{htmlFor:"".concat(t,"-product-brand-name"),className:"text-right",children:"Brand Name"}),(0,s.jsx)(w.p,{id:"".concat(t,"-product-brand-name"),value:a.brandName,onChange:e=>r(t=>({...t,brandName:e.target.value})),className:"col-span-3",placeholder:"(Optional) Official brand name"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(A.J,{htmlFor:"".concat(t,"-product-brand-url"),className:"text-right",children:"Brand URL"}),(0,s.jsx)(w.p,{id:"".concat(t,"-product-brand-url"),value:a.brandUrl,onChange:e=>r(t=>({...t,brandUrl:e.target.value})),className:"col-span-3",placeholder:"(Optional) https://www.brand.com"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,s.jsx)(A.J,{htmlFor:"".concat(t,"-product-description"),className:"text-right pt-2",children:"Description"}),(0,s.jsxs)("div",{className:"col-span-3 space-y-2",children:[(0,s.jsx)(C.T,{id:"".concat(t,"-product-description"),value:a.description,onChange:e=>r(t=>({...t,description:e.target.value})),placeholder:"(Optional) A short description of the product."}),(0,s.jsxs)(n.$,{size:"xs",variant:"outline",onClick:()=>o(t),disabled:i,children:[i?(0,s.jsx)(z.A,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,s.jsx)(_.A,{className:"mr-1.5 h-3.5 w-3.5"}),"Generate with AI"]})]})]}),(0,s.jsxs)(T.nD,{type:"multiple",defaultValue:["cohorts"],className:"w-full col-span-4",children:[(0,s.jsxs)(T.As,{value:"cohorts",children:[(0,s.jsxs)(T.$m,{children:[(0,s.jsx)(H.A,{className:"mr-2 h-4 w-4 text-accent"}),"Customer Cohorts"]}),(0,s.jsx)(T.ub,{className:"p-4 bg-muted/20",children:(0,s.jsx)(G,{label:"Cohort",values:a.customerCohorts||[],predefinedValues:E,onValuesChange:e=>l("customerCohorts",e),customInputPlaceholder:"Type a new cohort and press Enter"})})]}),(0,s.jsxs)(T.As,{value:"sales-plans",children:[(0,s.jsxs)(T.$m,{children:[(0,s.jsx)(V.A,{className:"mr-2 h-4 w-4 text-accent"}),"Sales Plans"]}),(0,s.jsx)(T.ub,{className:"p-4 bg-muted/20",children:(0,s.jsx)(G,{label:"Sales Plan",values:a.salesPlans||[],predefinedValues:I,onValuesChange:e=>l("salesPlans",e),customInputPlaceholder:"Type a new sales plan and press Enter"})})]}),(0,s.jsxs)(T.As,{value:"plan-configs",children:[(0,s.jsxs)(T.$m,{children:[(0,s.jsx)(K,{className:"mr-2 h-4 w-4 text-accent"}),"Special Plan Configurations"]}),(0,s.jsx)(T.ub,{className:"p-4 bg-muted/20",children:(0,s.jsx)(G,{label:"Plan Configuration",values:a.specialPlanConfigurations||[],predefinedValues:P,onValuesChange:e=>l("specialPlanConfigurations",e),customInputPlaceholder:"Type a new special configuration and press Enter"})})]})]})]})}let X=["ET","TOI","General"];function Z(){let{availableProducts:e,addProduct:t,editProduct:a,deleteProduct:p}=(0,i.G)(),[x,w]=(0,r.useState)(!1),{toast:A}=(0,v.dj)(),[C,T]=(0,r.useState)(!1),[k,Y]=(0,r.useState)({displayName:"",description:"",brandName:"",brandUrl:"",customerCohorts:[],salesPlans:[],specialPlanConfigurations:[]}),[I,E]=(0,r.useState)(!1),[P,S]=(0,r.useState)(null),[O,R]=(0,r.useState)({displayName:"",description:"",brandName:"",brandUrl:"",customerCohorts:[],salesPlans:[],specialPlanConfigurations:[]}),[D,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{w(!0)},[]);let[M,L]=(0,r.useState)(!1),[F,B]=(0,r.useState)(null),z=async e=>{let t="add"===e?k:O;if(!t.displayName.trim()&&!t.brandName.trim())return void A({variant:"destructive",title:"Context Required",description:"Please enter a Product Display Name or Brand Name before generating a description."});U(!0);try{let a=await y({productName:t.displayName,brandName:t.brandName,brandUrl:t.brandUrl});"add"===e?Y(e=>({...e,description:a.description})):R(e=>({...e,description:a.description})),A({title:"Description Generated",description:"AI has generated a product description based on the provided context."})}catch(e){console.error("Error generating product description:",e),A({variant:"destructive",title:"Generation Failed",description:"Could not generate description from AI."})}finally{U(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)(o.z,{title:"Product Management"}),(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Your Products"}),x?(0,s.jsxs)("p",{className:"text-muted-foreground",children:[e.length," product(s) available. You can edit the display name and other details for any product."]}):(0,s.jsx)(j.E,{className:"h-5 w-96"})]}),(0,s.jsxs)(n.$,{onClick:()=>T(!0),children:[(0,s.jsx)(m,{className:"mr-2 h-4 w-4"}),"Add New Product"]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center",children:[(0,s.jsx)(f.A,{className:"mr-2 h-5 w-5 text-primary"}),"Product List"]}),x?(0,s.jsxs)(l.BT,{children:[e.length," product(s) available. You can edit details and associated configurations."]}):(0,s.jsx)(j.E,{className:"h-5 w-80"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)(b.F,{className:"h-[calc(100vh-350px)]",children:(0,s.jsxs)(c.XI,{children:[(0,s.jsx)(c.A0,{children:(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nd,{children:"Display Name"}),(0,s.jsx)(c.nd,{children:"Description"}),(0,s.jsx)(c.nd,{children:"Configurations"}),(0,s.jsx)(c.nd,{className:"text-right",children:"Actions"})]})}),(0,s.jsxs)(c.BF,{children:[x&&e.map(e=>{var t,a,r;return(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nA,{className:"font-medium",children:e.displayName}),(0,s.jsx)(c.nA,{className:"text-muted-foreground max-w-sm truncate",title:e.description,children:e.description||(0,s.jsx)("span",{className:"italic",children:"No description"})}),(0,s.jsx)(c.nA,{children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(null==(t=e.customerCohorts)?void 0:t.length)?(0,s.jsxs)(N.E,{variant:"outline",children:[e.customerCohorts.length," Cohort(s)"]}):null,(null==(a=e.salesPlans)?void 0:a.length)?(0,s.jsxs)(N.E,{variant:"outline",children:[e.salesPlans.length," Plan(s)"]}):null,(null==(r=e.specialPlanConfigurations)?void 0:r.length)?(0,s.jsxs)(N.E,{variant:"outline",children:[e.specialPlanConfigurations.length," Config(s)"]}):null]})}),(0,s.jsxs)(c.nA,{className:"text-right space-x-2",children:[(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{S(e),R({displayName:e.displayName,description:e.description||"",brandName:e.brandName||"",brandUrl:e.brandUrl||"",customerCohorts:e.customerCohorts||[],salesPlans:e.salesPlans||[],specialPlanConfigurations:e.specialPlanConfigurations||[]}),E(!0)},title:"Edit product",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>(e=>{if(X.includes(e.name))return void A({variant:"destructive",title:"Action Forbidden",description:"Default products cannot be deleted as they are integral to the application."});B(e),L(!0)})(e),disabled:X.includes(e.name),className:"text-destructive hover:text-destructive/80 disabled:opacity-50 disabled:cursor-not-allowed",title:X.includes(e.name)?"Default products cannot be deleted":"Delete product",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]},e.name)}),!x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:4,children:(0,s.jsx)(j.E,{className:"h-8 w-full"})})}),(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:4,children:(0,s.jsx)(j.E,{className:"h-8 w-full"})})}),(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:4,children:(0,s.jsx)(j.E,{className:"h-8 w-full"})})})]})]})]})})})]})]}),(0,s.jsx)(d.lG,{open:C,onOpenChange:T,children:(0,s.jsxs)(d.Cf,{className:"sm:max-w-xl",children:[(0,s.jsxs)(d.c7,{children:[(0,s.jsx)(d.L3,{children:"Add New Product"}),(0,s.jsx)(d.rr,{children:"Create a new product. It will be available for selection across all features."})]}),(0,s.jsx)(b.F,{className:"max-h-[70vh]",children:(0,s.jsx)("div",{className:"pr-4",children:(0,s.jsx)(q,{context:"add",productData:k,updater:Y,isGeneratingDesc:D,onGenerateDescription:z})})}),(0,s.jsxs)(d.Es,{children:[(0,s.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,s.jsx)(n.$,{type:"submit",onClick:()=>{k.displayName.trim()&&t(k)&&(Y({displayName:"",description:"",brandName:"",brandUrl:"",customerCohorts:[],salesPlans:[],specialPlanConfigurations:[]}),T(!1))},children:"Add Product"})]})]})}),P&&(0,s.jsx)(d.lG,{open:I,onOpenChange:E,children:(0,s.jsxs)(d.Cf,{className:"sm:max-w-xl",children:[(0,s.jsxs)(d.c7,{children:[(0,s.jsx)(d.L3,{children:"Edit Product"}),(0,s.jsxs)(d.rr,{children:["Update the details for '",P.displayName,"'."]})]}),(0,s.jsx)(b.F,{className:"max-h-[70vh]",children:(0,s.jsx)("div",{className:"pr-4",children:(0,s.jsx)(q,{context:"edit",productData:O,updater:R,isGeneratingDesc:D,onGenerateDescription:z})})}),(0,s.jsxs)(d.Es,{children:[(0,s.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,s.jsx)(n.$,{type:"submit",onClick:()=>{P&&O.displayName.trim()&&a(P.name,O)&&(E(!1),S(null))},children:"Save Changes"})]})]})}),F&&(0,s.jsx)(u.Lt,{open:M,onOpenChange:L,children:(0,s.jsxs)(u.EO,{children:[(0,s.jsxs)(u.wd,{children:[(0,s.jsx)(u.r7,{children:"Are you absolutely sure?"}),(0,s.jsxs)(u.$v,{children:["This action cannot be undone. This will permanently delete the product",(0,s.jsxs)("span",{className:"font-semibold",children:[' "',F.displayName,'" ']}),"."]})]}),(0,s.jsxs)(u.ck,{children:[(0,s.jsx)(u.Zr,{children:"Cancel"}),(0,s.jsx)(u.Rx,{onClick:()=>{F&&(p(F.name),L(!1),B(null))},className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Yes, delete it"})]})]})})]})}},67050:(e,t,a)=>{"use strict";a.d(t,{M:()=>n});var s=a(12115);let r=[],i=!1;async function o(){if(!i){for(i=!0;r.length>0;){let e=r.shift();if(e)try{await e()}catch(e){console.error("Error processing save queue task:",e)}}i=!1}}function n(e,t){let[a,n]=(0,s.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):"function"==typeof t?t():t}catch(a){return console.error("Error reading localStorage key â€œ".concat(e,"â€:"),a),"function"==typeof t?t():t}}),l=(0,s.useRef)(!1);(0,s.useEffect)(()=>(l.current=!0,()=>{l.current=!1}),[]);let c=(0,s.useCallback)(t=>{try{let s=t instanceof Function?t(a):t;n(s),r.push(()=>new Promise((t,a)=>{try{window.localStorage.setItem(e,JSON.stringify(s)),t()}catch(t){t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)?console.error("Error setting localStorage key â€œ".concat(e,"â€: QUOTA EXCEEDED.")):console.error("Error setting localStorage key â€œ".concat(e,"â€:"),t),a(t)}})),i||o()}catch(t){console.error("Error calculating value to store for key â€œ".concat(e,"â€:"),t)}},[e,a]);return(0,s.useEffect)(()=>{let t=t=>{if(t.key===e&&t.newValue&&l.current)try{n(JSON.parse(t.newValue))}catch(e){console.error("Error parsing storage update:",e)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e]),[a,c]}},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var s=a(95155),r=a(12115),i=a(10489),o=a(83101),n=a(64269);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,n.cn)(l(),a),...r})});c.displayName=i.b.displayName},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>n,wL:()=>u});var s=a(95155),r=a(12115),i=a(64269);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},87270:(e,t,a)=>{"use strict";a.d(t,{A0:()=>n,BF:()=>l,Hj:()=>c,XI:()=>o,nA:()=>u,nd:()=>d});var s=a(95155),r=a(12115),i=a(64269);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",a),...r})})});o.displayName="Table";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",a),...r})});n.displayName="TableHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...r})});l.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});d.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},88964:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>g,EO:()=>p,Lt:()=>l,Rx:()=>b,Zr:()=>x,ck:()=>f,r7:()=>h,tv:()=>c,wd:()=>m});var s=a(95155),r=a(12115),i=a(35646),o=a(64269),n=a(3998);let l=i.bL,c=i.l9,d=i.ZL,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});u.displayName=i.hJ.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(i.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});p.displayName=i.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};m.displayName="AlertDialogHeader";let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...r})});h.displayName=i.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=i.VY.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.rc,{ref:t,className:(0,o.cn)((0,n.r)(),a),...r})});b.displayName=i.rc.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.ZD,{ref:t,className:(0,o.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});x.displayName=i.ZD.displayName}},e=>{e.O(0,[4909,6077,9972,6107,4037,6414,2410,8441,1255,7358],()=>e(e.s=15066)),_N_E=e.O()}]);