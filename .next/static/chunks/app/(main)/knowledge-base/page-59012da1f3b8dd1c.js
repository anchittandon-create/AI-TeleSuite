(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2134],{11570:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var a=n(95155),o=n(66942),s=n(22544),i=n(98734),r=n(44193),l=n(3998),c=n(41052),d=n(65142),u=n(31120),p=n(50909),h=n(11186),m=n(86948),g=n(15894),f=n(12115),y=n(59971);let x=(0,n(14294).A)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);var b=n(31524);let w=["General","Pricing","Product Description","Rebuttals","Pitch"],v=i.Ik({product:i.Yj().min(1,"Product must be selected."),persona:i.Yj().optional(),category:i.Yj().optional(),entryType:i.k5(["file","text"]).default("file"),knowledgeFiles:i.Ie().optional(),textContent:i.Yj().optional(),textEntryName:i.Yj().optional()}).superRefine((e,t)=>{if("file"===e.entryType)if(e.knowledgeFiles&&0!==e.knowledgeFiles.length)for(let n=0;n<e.knowledgeFiles.length;n++)e.knowledgeFiles[n].size>0x3200000&&t.addIssue({code:r.eq.custom,message:"Max file size is ".concat(50,'MB. File "').concat(e.knowledgeFiles[n].name,'" is too large.'),path:["knowledgeFiles"]});else t.addIssue({code:r.eq.custom,message:"At least one file is required for file upload.",path:["knowledgeFiles"]});else"text"===e.entryType&&((!e.textContent||e.textContent.trim().length<10)&&t.addIssue({code:r.eq.custom,message:"Text content must be at least 10 characters.",path:["textContent"]}),(!e.textEntryName||e.textEntryName.trim().length<3)&&t.addIssue({code:r.eq.custom,message:"A short name/title for the text entry is required (min 3 characters).",path:["textEntryName"]}))});function A(e){let{onSingleEntrySubmit:t,onMultipleFilesSubmit:n}=e,{toast:i}=(0,g.dj)(),[r,A]=(0,f.useState)(!1),T=f.useRef(null),{availableProducts:C}=(0,b.G)(),I=(0,s.mN)({resolver:(0,o.u)(v),defaultValues:{entryType:"file",textContent:"",textEntryName:"",category:"General"}}),S=I.watch("entryType"),P=async e=>{if(A(!0),"file"===e.entryType&&e.knowledgeFiles&&e.knowledgeFiles.length>0){let t=Array.from(e.knowledgeFiles).map(t=>({file:t,product:e.product,persona:e.persona,category:e.category,isTextEntry:!1}));await n(t),i({title:"".concat(t.length," File(s) Submitted"),description:"Metadata for ".concat(t.map(e=>e.file.name).join(", ")," has been saved.")})}else if("text"===e.entryType&&e.textContent&&e.textEntryName)await t({name:e.textEntryName,textContent:e.textContent,product:e.product,persona:e.persona,category:e.category,isTextEntry:!0}),i({title:"Text Entry Added",description:'"'.concat(e.textEntryName,'" has been added to the knowledge base.')});else{i({title:"Upload Error",description:"Please ensure you have selected files or entered text according to the form requirements.",variant:"destructive"}),A(!1);return}I.reset({product:e.product,persona:e.persona,category:e.category,entryType:e.entryType,knowledgeFiles:void 0,textContent:"",textEntryName:""}),T.current&&(T.current.value=""),A(!1)};return(0,a.jsxs)(m.Zp,{className:"w-full max-w-lg shadow-lg",children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{className:"text-xl",children:"Update Knowledge Base"}),(0,a.jsx)(m.BT,{children:"Add files or text entries to the knowledge base for a specific product."})]}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)(c.lV,{...I,children:(0,a.jsxs)("form",{onSubmit:I.handleSubmit(P),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(c.zB,{control:I.control,name:"product",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsxs)(c.lR,{children:["Product ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)(h.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,a.jsx)(c.MJ,{children:(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"Select a product"})})}),(0,a.jsx)(h.gC,{children:C.map(e=>(0,a.jsx)(h.eb,{value:e.name,children:e.displayName},e.name))})]}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:I.control,name:"category",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Category (Optional)"}),(0,a.jsxs)(h.l6,{onValueChange:t.onChange,value:t.value||"",children:[(0,a.jsx)(c.MJ,{children:(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"Select a category"})})}),(0,a.jsx)(h.gC,{children:w.map(e=>(0,a.jsx)(h.eb,{value:e,children:e},e))})]}),(0,a.jsx)(c.C5,{})]})}})]}),(0,a.jsx)(c.zB,{control:I.control,name:"entryType",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{className:"space-y-3",children:[(0,a.jsx)(c.lR,{children:"Entry Type"}),(0,a.jsx)(c.MJ,{children:(0,a.jsxs)(p.z,{onValueChange:t.onChange,defaultValue:t.value,className:"flex space-x-4",children:[(0,a.jsxs)(c.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,a.jsx)(c.MJ,{children:(0,a.jsx)(p.C,{value:"file"})}),(0,a.jsxs)(c.lR,{className:"font-normal flex items-center",children:[(0,a.jsx)(y.A,{className:"mr-1.5 h-4 w-4"})," Upload File(s)"]})]}),(0,a.jsxs)(c.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,a.jsx)(c.MJ,{children:(0,a.jsx)(p.C,{value:"text"})}),(0,a.jsxs)(c.lR,{className:"font-normal flex items-center",children:[(0,a.jsx)(x,{className:"mr-1.5 h-4 w-4"})," Add Text/Prompt"]})]})]})}),(0,a.jsx)(c.C5,{})]})}}),"file"===S&&(0,a.jsx)(c.zB,{control:I.control,name:"knowledgeFiles",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Upload File(s)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{type:"file",multiple:!0,ref:T,onChange:e=>t.onChange(e.target.files),className:"pt-1.5"})}),(0,a.jsx)(c.Rr,{children:"The application will store file metadata (name, type, size) to use as context. File content is not stored in your browser to avoid storage quota errors."}),(0,a.jsx)(c.C5,{})]})}}),"text"===S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.zB,{control:I.control,name:"textEntryName",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Name/Title for Text Entry"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Key Objection Rebuttals",...t})}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:I.control,name:"textContent",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Text Content / Prompt"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(u.T,{placeholder:"Enter your text, instructions, or prompt here...",className:"resize-y min-h-[100px]",...t})}),(0,a.jsx)(c.Rr,{children:"Enter the text directly. This can be used for quick notes, standard responses, or AI prompts."}),(0,a.jsx)(c.C5,{})]})}})]}),(0,a.jsx)(l.$,{type:"submit",className:"w-full",disabled:r,children:r?"Adding...":"file"===S?"Add File Metadata to KB":"Add Text Entry"})]})})})]})}var T=n(36950),C=n(39437),I=n(53489),S=n(13630),P=n(79313),j=n(80158),N=n(19149),E=n(98053);function R(){let{files:e,addFile:t,addFilesBatch:n,deleteFile:o,setFiles:s}=(0,C.J)(),{logActivity:i}=(0,P.Z)(),{toast:r}=(0,g.dj)(),[c,d]=(0,f.useState)(!1),[u,p]=(0,f.useState)(!1);(0,f.useEffect)(()=>{p(!0)},[]);let h=async e=>{let n=await t(e);i({module:"Knowledge Base Management",product:n.product,details:{action:"add",...n}})},m=async e=>{var t;let a=await n(e);i({module:"Knowledge Base Management",product:null==(t=a[0])?void 0:t.product,details:{action:"add_batch",filesData:a.map(e=>({name:e.name,type:e.type,size:e.size}))}})};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)(T.z,{title:"Knowledge Base Management"}),(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 flex flex-col items-center space-y-8",children:[(0,a.jsx)(A,{onSingleEntrySubmit:h,onMultipleFilesSubmit:m}),(0,a.jsxs)("div",{className:"w-full max-w-4xl flex justify-between items-center mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-primary",children:"Knowledge Base Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.$,{onClick:()=>{(0,j.U3)("AI_TeleSuite_Full_Replication_Prompt.txt","\n// =================================================================================================\n//\n//                        AI_TeleSuite: Full Replication Prompt & Implementation Guide\n//\n// This document provides a comprehensive technical breakdown of every feature in the AI_TeleSuite\n// application. It is intended as a complete guide for replication and understanding the system's\n// architecture, data flow, and AI logic.\n//\n// =================================================================================================\n\n\n// ==================================================\n//               CORE APPLICATION & UI\n// ==================================================\n\n/*\n** Home Page ('/home') **\n- **Purpose:** A central dashboard providing an at-a-glance overview of all application modules.\n- **Implementation:** Uses a series of \"Feature Widgets\". Each widget is a `<Card>` component that links to a specific feature page.\n- **Data Fetching:** Each widget's data is dynamically calculated on the client-side using hooks like `useActivityLogger`, `useKnowledgeBase`, and `useProductContext` to show statistics (e.g., \"Pitches Generated\", \"KB Entries\") and the last activity time.\n\n** Products ('/products') **\n- **Purpose:** Manage the product catalog that other features use for context.\n- **Implementation:** A page displaying a table of `ProductObject` items. It uses `useProductContext` to interact with `localStorage`.\n- **Logic:** Allows adding, editing, and deleting products. A \"Generate with AI\" button calls the `generateProductDescription` flow.\n*/\n\n// --- Prompt: Product Description Generator --- //\n/*\nYou are an expert product marketer. Your task is to generate a concise, compelling one-sentence product description for a product. The description should be suitable for a telesales application's internal reference. Focus on the likely core value or purpose of such a product based on your general knowledge.\n\nProduct Name: \"{{productName}}\"\n{{#if brandName}}Brand Name: \"{{brandName}}\"{{/if}}\n\nInstructions:\n1.  Use your general knowledge about the provided Brand Name and Product Name to generate a description.\n2.  Synthesize this knowledge into a single, engaging sentence that summarizes the product's core value.\n3.  If you have no knowledge of the product or brand, generate a plausible description based on the names alone.\n*/\n\n\n/*\n** Knowledge Base ('/knowledge-base') **\n- **Purpose:** The primary interface for adding new information (files or text) to the knowledge base.\n- **Implementation:** A form built with `react-hook-form` and `zod` for validation.\n- **Logic:**\n    1.  The user selects a product, category, and entry type (file or text).\n    2.  For files, it reads metadata. For text, it captures content.\n    3.  On submission, it calls the `useKnowledgeBase` hook's `addFile` or `addFilesBatch` function to persist to `localStorage`.\n*/\n\n\n// ==================================================\n//                 SALES TOOLS\n// ==================================================\n\n/*\n** AI Pitch Generator ('/pitch-generator') **\n- **Purpose:** Generates structured, high-quality sales pitches.\n- **Logic:** The frontend prepares a `knowledgeBaseContext` string and calls the `generatePitch` Genkit flow. The AI is instructed to follow strict rules, using specific KB categories ('Pitch', 'Product Description', 'Pricing') for specific parts of the generated pitch. It is authorized to browse the product's official URL as a fallback. The output is a structured `GeneratePitchOutput` object.\n*/\n\n// --- Prompt: Pitch Generator --- //\n/*\nYou are a world-class sales agent. Your goal is to be empathetic, persuasive, and clear, using the provided KB to drive conversion. Your responses must be of the absolute highest quality.\n\n**CRITICAL DIRECTIVE: You MUST base your entire response *exclusively* on the information provided in the structured 'Knowledge Base Context' section below. If a 'USER-SELECTED KB CONTEXT' section is present, it is your PRIMARY source of truth and MUST be prioritized over the general KB.**\n**If the provided Knowledge Base is insufficient or lacks specific details, you are authorized to supplement your response by browsing the official product website ({{{brandUrl}}}) and its sub-pages to gather the necessary information. Your primary goal is to be truthful and persuasive.**\n\n**KNOWLEDGE BASE USAGE RULES (NON-NEGOTIABLE):**\n1.  For the overall call structure, introduction, and flow, you MUST primarily use the content from any Knowledge Base item categorized as **'Pitch'**.\n2.  For factual content about the product, including features, benefits, and value propositions, you MUST exclusively use content from items categorized as **'Product Description'**.\n3.  For pricing details, offers, and discounts, you MUST use content from items categorized as **'Pricing'**.\n4.  If a category of document is missing, you must state that in the 'notesForAgent' and generate a generic but safe response for that section.\n5.  Never invent information. If the KB doesn't provide a detail, do not mention it.\n\n**Clarity and Simplicity Mandate:** The generated pitch must be **crystal clear and easily understandable** for a customer on a phone call. Use simple language, short sentences, and a logical flow. Avoid jargon, complex terms, or overly corporate phrasing. The goal is persuasion through clarity.\n\n**User and Pitch Context:**\n- Product: {{product}}\n- Brand Name: {{#if brandName}}{{brandName}}{{else}}{{product}}{{/if}}\n- Customer Cohort: {{customerCohort}}\n- Sales Plan (if specified): {{salesPlan}}\n- Offer (if specified): {{offer}}\n- Agent Name (if specified): {{agentName}}\n- Customer Name (if specified): {{userName}}\n\n{{#if optimizationContext}}\n**Optimization Insights (from previous call analysis):**\nYou MUST use these insights to refine the pitch. Lean into the strengths and address the weaknesses.\n```\n{{{optimizationContext}}}\n```\n{{/if}}\n\n**Knowledge Base Context (Your Sole Source of Information):**\n```\n{{{knowledgeBaseContext}}}\n```\n\n**Output Generation Rules & Pitch Structure (Strictly follow this):**\n\nYou MUST populate EVERY field in the 'GeneratePitchOutputSchema' based *only* on the context above, using the designated sections for their intended purpose.\n\n- **pitchTitle**: A compelling title for the pitch.\n- **warmIntroduction**: A brief, friendly opening. Introduce the agent (using \"{{agentName}}\" if provided, otherwise \"your agent\") and the brand (\"{{brandName}}\"). This section **MUST** include a clear **statement of purpose for the call**, derived from a **'Pitch'** category document in the Knowledge Base.\n- **personalizedHook**: A hook tailored to the customer cohort, expanding on the reason for the call. This is the most critical part for personalization. Analyze the cohort name (e.g., 'Payment Dropoff', 'Expired Users', 'New Prospect Outreach') and craft an opening that shows you understand their specific situation.\n- **productExplanation**: Explain the product's core value proposition. **Source this information *only* from a 'Product Description' document in the Knowledge Base.**\n- **keyBenefitsAndBundles**: Highlight 2-4 key benefits and any bundles. **Source this information *only* from a 'Product Description' document in the Knowledge Base.**\n- **discountOrDealExplanation**: Explain the specific deal or plan availability. Use \"<INSERT_PRICE>\" for the price. **Source this information *only* from a 'Pricing' document in the Knowledge Base.**\n- **objectionHandlingPreviews**: Proactively address 1-2 common objections. **Source this information *only* from 'Rebuttals' or 'Product Description' documents in the Knowledge Base.**\n- **finalCallToAction**: A clear, direct call to action that closes with a clear CTA.\n- **fullPitchScript**: A complete dialogue integrating all components above. Use the **'Pitch'** documents to guide the overall narrative. Target 450-600 words.\n- **estimatedDuration**: Estimate the speaking time for the agent's script.\n- **notesForAgent**: Provide notes for the agent. If the KB was insufficient for any section, mention it here.\n*/\n\n\n/*\n** AI Rebuttal Assistant ('/rebuttal-generator') **\n- **Purpose:** Provides contextual rebuttals to customer objections.\n- **Logic:** Calls the `generateRebuttal` Genkit flow. The AI is prompted to follow an \"Acknowledge, Bridge, Benefit, Clarify/Question\" (ABBC/Q) structure.\n- **Resilience:** Includes a non-AI, rule-based fallback (`generateFallbackRebuttal`) that uses keyword matching on the objection to generate a templated response, ensuring high availability.\n*/\n\n// --- Prompt: Rebuttal Generator --- //\n/*\nYou are a world-class sales coach and linguist, specializing in crafting perfect rebuttals... Your entire response MUST be grounded in the information provided in the 'Knowledge Base Context' section below...\n\n**Customer's Objection:** \"{{{objection}}}\"\n\n**Final Rebuttal Generation (Adhere to this Quality Rubric):**\n1.  **Adaptive Length (CRITICAL):** Adapt response length to objection complexity and KB richness.\n2.  **Mandatory Structure (ABBC/Q - Acknowledge, Bridge, Benefit, Clarify/Question):**\n    *   **(A) Acknowledge:** Start with empathy.\n    *   **(B) Bridge:** Transition smoothly.\n    *   **(B) Benefit (from KB/Website):** Present a counter-point as a benefit.\n    *   **(C/Q) Clarify/Question:** End with an open-ended question.\n3.  **Tone & Language:** Empathetic, confident, no jargon, no dismissiveness.\n*/\n\n\n// ==================================================\n//               ANALYSIS & REPORTING\n// ==================================================\n\n/*\n** Audio Transcription ('/transcription') **\n- **Purpose:** High-accuracy audio-to-text conversion.\n- **Logic:** Calls the `transcribeAudio` Genkit flow. The prompt gives strict instructions for English (Roman script) only, transliteration of Hinglish, diarization with labels like \"AGENT (Profile: ...)\" and \"USER (Profile: ...)\", and explicit tagging of non-dialogue events such as [PRECALL_ANSWER], [RINGING], [IVR_PROMPT], [IVR_MENU], [HOLD_TONE], [MUSIC], and [SILENCE].\n- **Resilience:** Uses a dual-model strategy. It first tries `gemini-2.0-flash`. If that fails, it retries with the more powerful `gemini-1.5-flash`. It also includes exponential backoff retry logic to handle API rate limits.\n*/\n\n// --- Prompt: Audio Transcription --- //\n/*\nYou are an expert transcriptionist. Your task is to transcribe the provided audio of a conversation between two speakers. Your output must be a JSON object with 'diarizedTranscript' and 'accuracyAssessment'.\n\n**TRANSCRIPTION RULES (STRICTLY FOLLOW):**\n1.  **Speaker Labels & Time Allotments:** Structure output in segments with timestamps (e.g., \"[0 seconds - 15 seconds]\") followed by \"AGENT (Profile: ...):\" or \"USER (Profile: ...):\" and their dialogue. Profiles must describe the role (e.g., \"Company Representative\", \"Customer / Caller\") and include the agent's stated name if present. Capture any additional cues you hear (team, role, location) inside the profile annotation without inventing information.\n2.  **Language:** Transcribe as spoken. Transliterate Hinglish into Roman script (e.g., \"achha theek hai\"). Do NOT translate.\n3.  **Pre-Call & System Events:** Identify and label non-dialogue events on their own line using tags such as [PRECALL_ANSWER], [RINGING], [IVR_PROMPT], [IVR_MENU], [HOLD_TONE], [MUSIC], or [SILENCE].\n*/\n\n/*\n** AI Call Scoring ('/call-scoring') **\n- **Purpose:** Provides a deep, rubric-based analysis of a call.\n- **Logic:** This is now a two-step process. First, the audio is transcribed using the resilient `transcribeAudio` flow. The resulting transcript is then passed to the `scoreCall` flow.\n- **AI Prompt:** The AI is instructed to act as a \"world-class, exceptionally detailed telesales performance coach.\" The prompt contains a detailed rubric of over 75 metrics the AI *must* score, analyzing both the transcript for content and the audio for tonality. It now also assesses \"Conversion Readiness\" and suggests a \"Disposition\".\n- **Resilience:** This flow also uses a dual-model fallback. The primary model (`gemini-1.5-flash`) attempts the deep analysis. If it fails, a backup model (`gemini-2.0-flash`) is called with a simpler, text-only prompt to ensure a score is always returned.\n*/\n\n// --- Prompt: Call Scoring (Deep Analysis) --- //\n/*\nYou are a world-class, exceptionally detailed telesales performance coach... Your primary goal is to provide an exhaustive, deeply analytical quality assessment against a detailed, multi-category rubric containing over 75 distinct metrics...\n\n**EVALUATION RUBRIC (You MUST score all 75+ metrics):**\n- **CATEGORY 1: Introduction & Rapport Building:** (Intro Quality, Hook Line, Greeting Tone, etc.)\n- **CATEGORY 2: Pitch & Product Communication:** (Pitch Adherence, Feature-to-Benefit Translation, Value Justification, etc.)\n- **CATEGORY 3: Customer Engagement & Control:** (Talk-Listen Ratio, Active Listening Cues, Questioning Skills, etc.)\n- **CATEGORY 4: Agent's Tonality & Soft Skills (Audio Analysis):** (Conviction, Clarity, Pacing, Empathy, etc.)\n- **CATEGORY 5: Needs Discovery & Qualification:** (Situation Questions, Problem Identification, Budget/Authority, etc.)\n- **CATEGORY 6: Sales Process & Hygiene:** (Misleading Info, Call Control, Compliance, etc.)\n- **CATEGORY 7: Objection Handling & Closing:** (Objection Recognition, ECIR framework, Urgency Creation, CTA, etc.)\n\n**FINAL OUTPUT SECTIONS (Top-level fields):**\n- **overallScore:** Average of all metric scores.\n- **callCategorisation:** (Excellent, Good, Average, Needs Improvement, Poor).\n- **suggestedDisposition**: Suggested final call disposition.\n- **conversionReadiness**: (High, Medium, Low).\n- **summary:** Concise paragraph summarizing the call.\n- **strengths:** Top 2-3 key strengths.\n- **areasForImprovement:** Top 2-3 actionable areas for improvement.\n- **redFlags:** Any critical issues.\n- **metricScores:** An array containing an object for EACH of the 75+ metrics.\n- **improvementSituations**: 2-4 specific moments where the agent could have responded better.\n*/\n\n/*\n** Combined Call Analysis ('/combined-call-analysis') **\n- **Purpose:** Aggregates multiple call scoring reports to find trends.\n- **Logic:** The user selects historical scored calls for a product. The report data is sent to the `analyzeCallBatch` Genkit flow. The AI synthesizes the information to find common strengths, weaknesses, and an average score. A \"Generate Optimized Pitches\" button then uses this analysis summary to create improved sales scripts via the `generatePitch` flow.\n*/\n\n// --- Prompt: Combined Call Analysis --- //\n/*\nYou are an expert call quality supervisor and data analyst... Your task is to analyze a batch of ${input.callReports.length} individual sales call scoring reports for the product: '${input.product}'.\n\nBased on ALL the provided individual call reports, generate a single, comprehensive COMBINED ANALYSIS REPORT... Your primary goal is to provide **actionable insights** that directly answer:\n1.  **What specific agent behaviors and script elements are successfully driving revenue?**\n2.  **What specific changes must be made to generate more subscriptions and increase revenue?**\n*/\n\n\n// ==================================================\n//                 VOICE AGENTS\n// ==================================================\n\n/*\n------------------------------------------------------------------\nAI Voice Sales & Support Agents ('/voice-sales-agent', '/voice-support-agent')\n------------------------------------------------------------------\nPurpose: Orchestrates a full, simulated voice-to-voice conversation.\nLogic & Reliability:\n  1. State Machine: The frontend is a robust state machine managing states\n     like CONFIGURING, LISTENING, PROCESSING, AI_SPEAKING, and ENDED.\n  2. ASR/TTS: Uses useWhisper for speech recognition and synthesizeSpeechOnClient\n     for text-to-speech.\n  3. Barge-in: The useWhisper hook's onTranscribe callback implements barge-in.\n     User speech immediately stops any ongoing TTS playback.\n  4. Turn-taking vs. Inactivity: useWhisper has a short silenceTimeout (~50ms)\n     for immediate turn-taking and a separate inactivityTimeout (~3000ms) to\n     remind the user if no speech is detected.\n  5. Routing (Sales Agent): runVoiceSalesAgentTurn uses a fast \"router\" prompt\n     to classify user intent (continue pitch, answer question, handle objection)\n     and delegates to smaller prompts.\n  6. Post-Call: When the call ends, a full transcript is constructed and the\n     scoreCall flow analyzes the interaction.\n*/\n\n// --- Prompts: Voice Sales Agent (Router & Answer Generators) --- //\n/*\nRouter Prompt:\n  You are an AI sales agent controller. Your task is to analyze the user's last response within\n  the context of the conversation history and decide the next logical action for the AI agent to take.\n  User's Last Response: \"{{{lastUserResponse}}}\"\n  Decision Framework:\n    1. If user asks a SUPPORT question -> Action: ANSWER_SUPPORT_QUESTION\n    2. If user asks a SALES question -> Action: ANSWER_SALES_QUESTION\n    3. If user raises an OBJECTION -> Action: HANDLE_SALES_OBJECTION\n    4. If user gives a positive signal -> Action: CONTINUE_PITCH\n    5. If user wants to end -> Action: CLOSING_STATEMENT\n    6. If response is unclear -> Action: ACKNOWLEDGE_AND_WAIT\n\nAnswer Generator Prompts (Sales, Support, Objection):\n  You are a helpful AI assistant. Use the provided Knowledge Base context to answer.\n  Knowledge Base Context: {{{knowledgeBaseContext}}}\n  User Question/Objection: \"{{{userQuestion/userObjection}}}\"\n*/\n\n// --- Prompt: Voice Support Agent --- //\n/*\nYou are a clear, factual, step-by-step support agent for {{{product}}}. Your name is {{{agentName}}}.\nYour primary goal is to provide crisp, factual support answers grounded in the provided Knowledge Base.\n\n**User's Query:** \"{{{userQuery}}}\"\n**Knowledge Base Context for {{{product}}}:** ```{{{knowledgeBaseContext}}}```\n\n**Critical Instructions:**\n1.  Analyze query and prioritize KB.\n2.  If query requires personal account data (e.g., \"MY invoice\"), politely state you cannot access it and set **requiresLiveDataFetch: true**.\n3.  If KB does not contain the answer, state that and set **isUnanswerableFromKB: true**.\n4.  Be conversational and professional.\n*/\n\n\n// ==================================================\n//               CONTENT & DATA TOOLS\n// ==================================================\n\n// --- Prompt: Training Deck Generator --- //\n/*\nYou are a presentation and documentation specialist...\nProduct: {{{product}}}\nTarget Output Format: {{{deckFormatHint}}}\nContextual Information Provided: {{{knowledgeBaseItems}}}\n\nYour Task:\nGenerate content for a training material. Create a 'deckTitle' and logical 'sections'.\n\n**Special Case 1: \"ET Prime – Sales Training Deck\"**\nIf the request is for an \"ET Prime – Sales Training Deck\", you MUST structure your output using the predefined framework (Title Slide, What is ET Prime?, Key Benefits, etc.).\n\n**Special Case 2: \"Telesales Data Analysis Framework\"**\nIf the request is for a \"Telesales Data Analysis Framework\", you MUST structure your output according to the 9-section framework (Objective, Data Sources, Key Metrics, etc.).\n\n**General Case:**\nSynthesize the provided 'Contextual Information' into a relevant and well-structured training material.\n*/\n\n// --- Prompt: AI Data Analyst --- //\n/*\nYou are an advanced Excel analyst AI, specializing in telesales and subscription operations. Your job is to intelligently clean, reformat, and analyze business data (as described by the user) for actionable insights.\n\nCRITICAL: User's Detailed Data Description & Analysis Prompt:\nThis is your PRIMARY and ESSENTIAL source of information about the data structure, contents (including any messiness), and analytical goals.\n\"\"\"\n{{{userAnalysisPrompt}}}\n\"\"\"\n\nYour Analytical Process (Simulated based on User's Description):\n  1. Data Reconstruction (Simulated): Explain how you would hypothetically clean the data based on the user's description.\n  2. Table Normalization (Simulated): Describe how you would reconstruct the data into clean tables.\n  3. Smart Table Recognition: Explain how you are inferring the purpose of different data tables (e.g., CDR, Daily MIS).\n  4. KPI Calculation: From the assumed clean tables, calculate or explain how you would calculate key KPIs.\n  5. Insight Generation: Populate the report with insights from your simulated analysis.\n  6. Output Style: Adhere strictly to the 'DataAnalysisReportSchema' and always include the standard disclaimer.\n*/\n\n/*\n * Batch Audio Downloader ('/batch-audio-downloader')\n * - Purpose: Downloads multiple audio files from URLs and bundles them into a ZIP archive.\n * - Logic: A purely client-side utility using jszip and xlsx. The user provides URLs via text or an\n *   Excel file. The frontend fetches each file and adds it to a JSZip instance, which then generates\n *   a downloadable ZIP file. It includes a clear warning about server CORS policies.\n */\n\n\n// ==================================================\n//                 SYSTEM & DASHBOARDS\n// ==================================================\n\n/*\n** All Dashboards (e.g., '/call-scoring-dashboard', '/transcription-dashboard') **\n- **Purpose:** To view historical activity for a specific module.\n- **Implementation:** All dashboards are client components that use the `useActivityLogger` hook to read data from `localStorage`.\n- **Logic:** They filter activities by module, render them in a table, and provide a \"View Details\" dialog that often reuses the primary feature's results card. They all include data export functionality.\n\n** Global Activity Log ('/activity-dashboard') **\n- **Purpose:** A master log of every significant user action.\n- **Logic:** Reads the full activity log from `useActivityLogger` and provides advanced filtering by date, agent, module, and product.\n\n** Clone Full App ('/clone-app') **\n- **Purpose:** Provides the full source code and replication prompts.\n- **Logic:** A \"Download Project ZIP\" button calls the `/api/clone-app` API route, which uses `JSZip` on the server to package the project files. A \"Copy Replication Prompt\" button copies this entire document to the clipboard.\n*/\n\n// --- End of AI_TeleSuite Implementation Logic --- //\n"),i({module:"Knowledge Base Management",details:{action:"download_full_prompts"}})},variant:"outline",children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Download Full Replication Prompt"]}),(0,a.jsxs)(E.Lt,{open:c,onOpenChange:d,children:[(0,a.jsx)(E.tv,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"destructive",disabled:!u||!e||0===e.length,children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Clear All Entries"]})}),(0,a.jsxs)(E.EO,{children:[(0,a.jsxs)(E.wd,{children:[(0,a.jsx)(E.r7,{children:"Are you absolutely sure?"}),(0,a.jsxs)(E.$v,{children:["This action cannot be undone. This will permanently delete all (",(null==e?void 0:e.length)||0,") entries from your knowledge base."]})]}),(0,a.jsxs)(E.ck,{children:[(0,a.jsx)(E.Zr,{children:"Cancel"}),(0,a.jsx)(E.Rx,{onClick:()=>{let t=e.length;s([]),r({title:"Knowledge Base Cleared",description:"".concat(t," entr(y/ies) have been removed.")}),i({module:"Knowledge Base Management",details:{action:"clear_all",countCleared:t}}),d(!1)},className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete all"})]})]})]})]})]}),(0,a.jsx)(N.W,{files:e,onDeleteFile:t=>{var n;let a=(null==(n=e.find(e=>e.id===t))?void 0:n.name)||"Unknown file";o(t),r({title:"Entry Deleted",description:'"'.concat(a,'" has been removed from the knowledge base.')}),i({module:"Knowledge Base Management",details:{action:"delete",fileId:t,name:a}})}})]})]})}},31120:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var a=n(95155),o=n(12115),s=n(64269);let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});i.displayName="Textarea"},41052:(e,t,n)=>{"use strict";n.d(t,{C5:()=>x,MJ:()=>f,Rr:()=>y,eI:()=>m,lR:()=>g,lV:()=>c,zB:()=>u});var a=n(95155),o=n(12115),s=n(32467),i=n(22544),r=n(64269),l=n(76444);let c=i.Op,d=o.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(i.xI,{...t})})},p=()=>{let e=o.useContext(d),t=o.useContext(h),{getFieldState:n,formState:a}=(0,i.xW)(),s=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=t;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...s}},h=o.createContext({}),m=o.forwardRef((e,t)=>{let{className:n,...s}=e,i=o.useId();return(0,a.jsx)(h.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,r.cn)("space-y-2",n),...s})})});m.displayName="FormItem";let g=o.forwardRef((e,t)=>{let{className:n,...o}=e,{error:s,formItemId:i}=p();return(0,a.jsx)(l.J,{ref:t,className:(0,r.cn)(s&&"text-destructive",n),htmlFor:i,...o})});g.displayName="FormLabel";let f=o.forwardRef((e,t)=>{let{...n}=e,{error:o,formItemId:i,formDescriptionId:r,formMessageId:l}=p();return(0,a.jsx)(s.DX,{ref:t,id:i,"aria-describedby":o?"".concat(r," ").concat(l):"".concat(r),"aria-invalid":!!o,...n})});f.displayName="FormControl";let y=o.forwardRef((e,t)=>{let{className:n,...o}=e,{formDescriptionId:s}=p();return(0,a.jsx)("p",{ref:t,id:s,className:(0,r.cn)("text-sm text-muted-foreground",n),...o})});y.displayName="FormDescription";let x=o.forwardRef((e,t)=>{var n;let{className:o,children:s,...i}=e,{error:l,formMessageId:c}=p(),d=l?String(null!=(n=null==l?void 0:l.message)?n:""):s;return d?(0,a.jsx)("p",{ref:t,id:c,className:(0,r.cn)("text-sm font-medium text-destructive",o),...i,children:d}):null});x.displayName="FormMessage"},50909:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,z:()=>l});var a=n(95155),o=n(12115),s=n(24058),i=n(75797),r=n(64269);let l=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,a.jsx)(s.bL,{className:(0,r.cn)("grid gap-2",n),...o,ref:t})});l.displayName=s.bL.displayName;let c=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,a.jsx)(s.q7,{ref:t,className:(0,r.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...o,children:(0,a.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=s.q7.displayName},59007:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(14294).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},59971:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(14294).A)("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]])},99252:(e,t,n)=>{Promise.resolve().then(n.bind(n,11570))}},e=>{e.O(0,[3524,4909,6077,9972,6107,8458,312,2254,6414,6942,7496,8405,9032,2410,7380,8630,8441,1255,7358],()=>e(e.s=99252)),_N_E=e.O()}]);